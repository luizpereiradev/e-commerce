{"/home/luck/projetos/portfolio/e-commerce/packages/server/src/app.ts":{"path":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/app.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":53}},"4":{"start":{"line":7,"column":18},"end":{"line":7,"column":55}},"5":{"start":{"line":8,"column":15},"end":{"line":8,"column":61}},"6":{"start":{"line":9,"column":29},"end":{"line":9,"column":75}},"7":{"start":{"line":10,"column":23},"end":{"line":10,"column":66}},"8":{"start":{"line":11,"column":12},"end":{"line":11,"column":36}},"9":{"start":{"line":12,"column":0},"end":{"line":12,"column":34}},"10":{"start":{"line":13,"column":0},"end":{"line":13,"column":117}},"11":{"start":{"line":14,"column":0},"end":{"line":14,"column":47}},"12":{"start":{"line":15,"column":0},"end":{"line":15,"column":57}},"13":{"start":{"line":16,"column":0},"end":{"line":16,"column":54}},"14":{"start":{"line":17,"column":0},"end":{"line":17,"column":30}},"15":{"start":{"line":18,"column":0},"end":{"line":18,"column":22}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":5,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1},"f":{"0":5},"b":{"0":[1,1,1],"1":[2,3],"2":[5,5]},"inputSourceMap":{"version":3,"file":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/app.ts","sources":["/home/luck/projetos/portfolio/e-commerce/packages/server/src/app.ts"],"names":[],"mappings":";;;;;AAAA,sDAA8B;AAC9B,wDAAgC;AAChC,8DAA6C;AAC7C,4EAA0C;AAE1C,mEAA6C;AAE7C,MAAM,GAAG,GAAG,IAAA,iBAAO,GAAE,CAAC;AAEtB,GAAG,CAAC,GAAG,CAAC,iBAAO,CAAC,IAAI,EAAE,CAAC,CAAC;AAExB,GAAG,CAAC,GAAG,CAAC,WAAW,EAAE,4BAAS,CAAC,KAAK,EAAE,4BAAS,CAAC,KAAK,CAAC,sBAAe,CAAC,CAAC,CAAA;AAEvE,GAAG,CAAC,GAAG,CAAC,OAAO,EAAE,iBAAO,CAAC,UAAU,CAAC,CAAC;AACrC,GAAG,CAAC,GAAG,CAAC,aAAa,EAAE,iBAAO,CAAC,cAAc,CAAC,CAAC;AAC/C,GAAG,CAAC,GAAG,CAAC,WAAW,EAAE,iBAAO,CAAC,aAAa,CAAC,CAAC;AAE5C,GAAG,CAAC,GAAG,CAAC,cAAW,CAAC,KAAK,CAAC,CAAC;AAE3B,kBAAe,GAAG,CAAC","sourcesContent":["import express from 'express';\nimport Factory from './factory';\nimport Middlewares from './middlewares/User';\nimport swaggerUi from 'swagger-ui-express'\n\nimport swaggerDocument from '../swagger.json'\n\nconst app = express();\n\napp.use(express.json());\n\napp.use('/api-docs', swaggerUi.serve, swaggerUi.setup(swaggerDocument))\n\napp.use('/user', Factory.userRouter);\napp.use('/categories', Factory.categoryRouter);\napp.use('/products', Factory.productRouter);\n\napp.use(Middlewares.error);\n\nexport default app;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b3f7439971ac061b0ee01d37145da5485e969c65","contentHash":"f1a4fa0e92e9ef21a1140a7b69316423d670b38fb6cf0e06819466860a9e05a7"},"/home/luck/projetos/portfolio/e-commerce/packages/server/src/factory.ts":{"path":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/factory.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":17},"end":{"line":6,"column":42}},"4":{"start":{"line":7,"column":18},"end":{"line":7,"column":36}},"5":{"start":{"line":8,"column":21},"end":{"line":8,"column":66}},"6":{"start":{"line":9,"column":21},"end":{"line":9,"column":66}},"7":{"start":{"line":10,"column":17},"end":{"line":10,"column":58}},"8":{"start":{"line":11,"column":18},"end":{"line":11,"column":60}},"9":{"start":{"line":12,"column":21},"end":{"line":12,"column":70}},"10":{"start":{"line":13,"column":18},"end":{"line":13,"column":64}},"11":{"start":{"line":14,"column":21},"end":{"line":14,"column":70}},"12":{"start":{"line":15,"column":17},"end":{"line":15,"column":62}},"13":{"start":{"line":16,"column":21},"end":{"line":16,"column":69}},"14":{"start":{"line":17,"column":18},"end":{"line":17,"column":63}},"15":{"start":{"line":18,"column":21},"end":{"line":18,"column":69}},"16":{"start":{"line":19,"column":17},"end":{"line":19,"column":61}},"17":{"start":{"line":22,"column":31},"end":{"line":22,"column":72}},"18":{"start":{"line":23,"column":28},"end":{"line":23,"column":65}},"19":{"start":{"line":24,"column":31},"end":{"line":24,"column":68}},"20":{"start":{"line":25,"column":27},"end":{"line":25,"column":88}},"21":{"start":{"line":26,"column":8},"end":{"line":26,"column":33}},"22":{"start":{"line":29,"column":35},"end":{"line":29,"column":76}},"23":{"start":{"line":30,"column":32},"end":{"line":30,"column":73}},"24":{"start":{"line":31,"column":35},"end":{"line":31,"column":76}},"25":{"start":{"line":32,"column":31},"end":{"line":32,"column":96}},"26":{"start":{"line":33,"column":8},"end":{"line":33,"column":37}},"27":{"start":{"line":36,"column":34},"end":{"line":36,"column":75}},"28":{"start":{"line":37,"column":37},"end":{"line":37,"column":78}},"29":{"start":{"line":38,"column":31},"end":{"line":38,"column":93}},"30":{"start":{"line":39,"column":34},"end":{"line":39,"column":74}},"31":{"start":{"line":40,"column":30},"end":{"line":40,"column":94}},"32":{"start":{"line":41,"column":8},"end":{"line":41,"column":36}},"33":{"start":{"line":44,"column":0},"end":{"line":44,"column":46}},"34":{"start":{"line":45,"column":0},"end":{"line":45,"column":26}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":21,"column":4},"end":{"line":21,"column":5}},"loc":{"start":{"line":21,"column":28},"end":{"line":27,"column":5}},"line":21},"2":{"name":"(anonymous_2)","decl":{"start":{"line":28,"column":4},"end":{"line":28,"column":5}},"loc":{"start":{"line":28,"column":32},"end":{"line":34,"column":5}},"line":28},"3":{"name":"(anonymous_3)","decl":{"start":{"line":35,"column":4},"end":{"line":35,"column":5}},"loc":{"start":{"line":35,"column":31},"end":{"line":42,"column":5}},"line":35}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":12,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1},"f":{"0":12,"1":1,"2":1,"3":1},"b":{"0":[1,1,1],"1":[12,0],"2":[12,12]},"inputSourceMap":{"version":3,"file":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/factory.ts","sources":["/home/luck/projetos/portfolio/e-commerce/packages/server/src/factory.ts"],"names":[],"mappings":";;;;;AAAA,2CAA8C;AAC9C,qCAAiC;AACjC,mEAA+C;AAC/C,mEAA+C;AAC/C,2DAAuC;AACvC,6DAAyC;AACzC,uEAAuD;AACvD,iEAAiD;AACjD,uEAAuD;AACvD,+DAA+C;AAC/C,sEAAqD;AACrD,gEAA+C;AAC/C,sEAAqD;AACrD,8DAA6C;AAE7C,MAAqB,OAAO;IAGnB,MAAM,KAAK,UAAU;QAC1B,MAAM,cAAc,GAAG,IAAI,oBAAc,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QAC3D,MAAM,WAAW,GAAG,IAAI,iBAAW,CAAC,cAAc,CAAC,CAAC;QACpD,MAAM,cAAc,GAAG,IAAI,oBAAc,CAAC,WAAW,CAAC,CAAC;QACvD,MAAM,UAAU,GAAG,IAAI,gBAAU,CAAC,IAAA,gBAAM,GAAE,EAAE,cAAc,CAAC,CAAC;QAE5D,OAAO,UAAU,CAAC,MAAM,CAAC;IAC3B,CAAC;IAEM,MAAM,KAAK,cAAc;QAC9B,MAAM,kBAAkB,GAAG,IAAI,oBAAkB,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QACnE,MAAM,eAAe,GAAG,IAAI,iBAAe,CAAC,kBAAkB,CAAC,CAAC;QAChE,MAAM,kBAAkB,GAAG,IAAI,oBAAkB,CAAC,eAAe,CAAC,CAAC;QACnE,MAAM,cAAc,GAAG,IAAI,gBAAc,CAAC,IAAA,gBAAM,GAAE,EAAE,kBAAkB,CAAC,CAAC;QAExE,OAAO,cAAc,CAAC,MAAM,CAAC;IAC/B,CAAC;IAEM,MAAM,KAAK,aAAa;QAC7B,MAAM,iBAAiB,GAAG,IAAI,oBAAiB,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QACjE,MAAM,oBAAoB,GAAG,IAAI,oBAAkB,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QACrE,MAAM,cAAc,GAAG,IAAI,iBAAc,CAAC,iBAAiB,EAAE,oBAAoB,CAAC,CAAC;QACnF,MAAM,iBAAiB,GAAG,IAAI,oBAAiB,CAAC,cAAc,CAAC,CAAC;QAChE,MAAM,aAAa,GAAG,IAAI,gBAAa,CAAC,IAAA,gBAAM,GAAE,EAAE,iBAAiB,CAAC,CAAC;QAErE,OAAO,aAAa,CAAC,MAAM,CAAC;IAC9B,CAAC;;AA5Bc,eAAO,GAAG,IAAI,qBAAY,EAAE,CAAC;kBADzB,OAAO","sourcesContent":["import { PrismaClient } from '@prisma/client';\nimport { Router } from 'express';\nimport UserController from './user/controller';\nimport UserRepository from './user/repository';\nimport UserRouter from './user/router';\nimport UserService from './user/service';\nimport CategoryRepository from './category/repository';\nimport CategoryService from './category/service';\nimport CategoryController from './category/controller';\nimport CategoryRouter from './category/router';\nimport ProductRepository from './product/repository';\nimport ProductService from './product/service';\nimport ProductController from './product/controller';\nimport ProductRouter from './product/router';\n\nexport default class Factory {\n  private static _prisma = new PrismaClient();\n\n  public static get userRouter() {\n    const userRepository = new UserRepository(Factory._prisma);\n    const userService = new UserService(userRepository);\n    const userController = new UserController(userService);\n    const userRouter = new UserRouter(Router(), userController);\n\n    return userRouter.router;\n  }\n\n  public static get categoryRouter() {\n    const categoryRepository = new CategoryRepository(Factory._prisma);\n    const categoryService = new CategoryService(categoryRepository);\n    const categoryController = new CategoryController(categoryService);\n    const categoryRouter = new CategoryRouter(Router(), categoryController);\n\n    return categoryRouter.router;\n  }\n\n  public static get productRouter() {\n    const productRepository = new ProductRepository(Factory._prisma);\n    const categoriesRepository = new CategoryRepository(Factory._prisma);\n    const productService = new ProductService(productRepository, categoriesRepository);\n    const productController = new ProductController(productService);\n    const productRouter = new ProductRouter(Router(), productController);\n\n    return productRouter.router;\n  }\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"48303ce57652bbea7a835f5c5484056ad08b00f5","contentHash":"4b96466314a93cb06c8de92879a495541a01242670d8c953255f7939de718ba9"},"/home/luck/projetos/portfolio/e-commerce/packages/server/src/user/controller.ts":{"path":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/user/controller.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":21},"end":{"line":15,"column":58}},"16":{"start":{"line":16,"column":17},"end":{"line":16,"column":60}},"17":{"start":{"line":17,"column":18},"end":{"line":17,"column":55}},"18":{"start":{"line":20,"column":8},"end":{"line":30,"column":11}},"19":{"start":{"line":20,"column":43},"end":{"line":30,"column":10}},"20":{"start":{"line":21,"column":12},"end":{"line":29,"column":13}},"21":{"start":{"line":22,"column":33},"end":{"line":22,"column":61}},"22":{"start":{"line":23,"column":16},"end":{"line":23,"column":47}},"23":{"start":{"line":24,"column":16},"end":{"line":24,"column":58}},"24":{"start":{"line":27,"column":16},"end":{"line":27,"column":55}},"25":{"start":{"line":28,"column":16},"end":{"line":28,"column":28}},"26":{"start":{"line":31,"column":8},"end":{"line":44,"column":11}},"27":{"start":{"line":31,"column":43},"end":{"line":44,"column":10}},"28":{"start":{"line":32,"column":23},"end":{"line":32,"column":50}},"29":{"start":{"line":33,"column":12},"end":{"line":34,"column":71}},"30":{"start":{"line":34,"column":16},"end":{"line":34,"column":71}},"31":{"start":{"line":35,"column":12},"end":{"line":43,"column":13}},"32":{"start":{"line":36,"column":29},"end":{"line":36,"column":60}},"33":{"start":{"line":37,"column":16},"end":{"line":37,"column":43}},"34":{"start":{"line":38,"column":16},"end":{"line":38,"column":59}},"35":{"start":{"line":41,"column":16},"end":{"line":41,"column":56}},"36":{"start":{"line":42,"column":16},"end":{"line":42,"column":28}},"37":{"start":{"line":45,"column":8},"end":{"line":61,"column":11}},"38":{"start":{"line":45,"column":42},"end":{"line":61,"column":10}},"39":{"start":{"line":46,"column":55},"end":{"line":46,"column":63}},"40":{"start":{"line":47,"column":12},"end":{"line":60,"column":13}},"41":{"start":{"line":48,"column":32},"end":{"line":53,"column":18}},"42":{"start":{"line":54,"column":16},"end":{"line":54,"column":46}},"43":{"start":{"line":55,"column":16},"end":{"line":55,"column":58}},"44":{"start":{"line":58,"column":16},"end":{"line":58,"column":55}},"45":{"start":{"line":59,"column":16},"end":{"line":59,"column":28}},"46":{"start":{"line":62,"column":8},"end":{"line":81,"column":11}},"47":{"start":{"line":62,"column":42},"end":{"line":81,"column":10}},"48":{"start":{"line":63,"column":23},"end":{"line":63,"column":50}},"49":{"start":{"line":64,"column":12},"end":{"line":65,"column":71}},"50":{"start":{"line":65,"column":16},"end":{"line":65,"column":71}},"51":{"start":{"line":66,"column":55},"end":{"line":66,"column":63}},"52":{"start":{"line":67,"column":12},"end":{"line":80,"column":13}},"53":{"start":{"line":68,"column":36},"end":{"line":73,"column":18}},"54":{"start":{"line":74,"column":16},"end":{"line":74,"column":50}},"55":{"start":{"line":75,"column":16},"end":{"line":75,"column":58}},"56":{"start":{"line":78,"column":16},"end":{"line":78,"column":55}},"57":{"start":{"line":79,"column":16},"end":{"line":79,"column":28}},"58":{"start":{"line":82,"column":8},"end":{"line":95,"column":11}},"59":{"start":{"line":82,"column":42},"end":{"line":95,"column":10}},"60":{"start":{"line":83,"column":23},"end":{"line":83,"column":50}},"61":{"start":{"line":84,"column":12},"end":{"line":85,"column":71}},"62":{"start":{"line":85,"column":16},"end":{"line":85,"column":71}},"63":{"start":{"line":86,"column":12},"end":{"line":94,"column":13}},"64":{"start":{"line":87,"column":16},"end":{"line":87,"column":47}},"65":{"start":{"line":88,"column":16},"end":{"line":88,"column":38}},"66":{"start":{"line":89,"column":16},"end":{"line":89,"column":58}},"67":{"start":{"line":92,"column":16},"end":{"line":92,"column":55}},"68":{"start":{"line":93,"column":16},"end":{"line":93,"column":28}},"69":{"start":{"line":96,"column":8},"end":{"line":107,"column":11}},"70":{"start":{"line":96,"column":41},"end":{"line":107,"column":10}},"71":{"start":{"line":97,"column":40},"end":{"line":97,"column":48}},"72":{"start":{"line":98,"column":12},"end":{"line":106,"column":13}},"73":{"start":{"line":99,"column":30},"end":{"line":99,"column":72}},"74":{"start":{"line":100,"column":16},"end":{"line":100,"column":44}},"75":{"start":{"line":101,"column":16},"end":{"line":101,"column":57}},"76":{"start":{"line":104,"column":16},"end":{"line":104,"column":54}},"77":{"start":{"line":105,"column":16},"end":{"line":105,"column":28}},"78":{"start":{"line":108,"column":8},"end":{"line":108,"column":32}},"79":{"start":{"line":111,"column":0},"end":{"line":111,"column":33}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":19,"column":4},"end":{"line":19,"column":5}},"loc":{"start":{"line":19,"column":51},"end":{"line":109,"column":5}},"line":19},"9":{"name":"(anonymous_9)","decl":{"start":{"line":20,"column":22},"end":{"line":20,"column":23}},"loc":{"start":{"line":20,"column":43},"end":{"line":30,"column":10}},"line":20},"10":{"name":"(anonymous_10)","decl":{"start":{"line":20,"column":75},"end":{"line":20,"column":76}},"loc":{"start":{"line":20,"column":88},"end":{"line":30,"column":9}},"line":20},"11":{"name":"(anonymous_11)","decl":{"start":{"line":31,"column":23},"end":{"line":31,"column":24}},"loc":{"start":{"line":31,"column":43},"end":{"line":44,"column":10}},"line":31},"12":{"name":"(anonymous_12)","decl":{"start":{"line":31,"column":75},"end":{"line":31,"column":76}},"loc":{"start":{"line":31,"column":88},"end":{"line":44,"column":9}},"line":31},"13":{"name":"(anonymous_13)","decl":{"start":{"line":45,"column":22},"end":{"line":45,"column":23}},"loc":{"start":{"line":45,"column":42},"end":{"line":61,"column":10}},"line":45},"14":{"name":"(anonymous_14)","decl":{"start":{"line":45,"column":74},"end":{"line":45,"column":75}},"loc":{"start":{"line":45,"column":87},"end":{"line":61,"column":9}},"line":45},"15":{"name":"(anonymous_15)","decl":{"start":{"line":62,"column":22},"end":{"line":62,"column":23}},"loc":{"start":{"line":62,"column":42},"end":{"line":81,"column":10}},"line":62},"16":{"name":"(anonymous_16)","decl":{"start":{"line":62,"column":74},"end":{"line":62,"column":75}},"loc":{"start":{"line":62,"column":87},"end":{"line":81,"column":9}},"line":62},"17":{"name":"(anonymous_17)","decl":{"start":{"line":82,"column":22},"end":{"line":82,"column":23}},"loc":{"start":{"line":82,"column":42},"end":{"line":95,"column":10}},"line":82},"18":{"name":"(anonymous_18)","decl":{"start":{"line":82,"column":74},"end":{"line":82,"column":75}},"loc":{"start":{"line":82,"column":87},"end":{"line":95,"column":9}},"line":82},"19":{"name":"(anonymous_19)","decl":{"start":{"line":96,"column":21},"end":{"line":96,"column":22}},"loc":{"start":{"line":96,"column":41},"end":{"line":107,"column":10}},"line":96},"20":{"name":"(anonymous_20)","decl":{"start":{"line":96,"column":73},"end":{"line":96,"column":74}},"loc":{"start":{"line":96,"column":86},"end":{"line":107,"column":9}},"line":96}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":19,"column":16},"end":{"line":19,"column":49}},"type":"default-arg","locations":[{"start":{"line":19,"column":26},"end":{"line":19,"column":49}}],"line":19},"9":{"loc":{"start":{"line":33,"column":12},"end":{"line":34,"column":71}},"type":"if","locations":[{"start":{"line":33,"column":12},"end":{"line":34,"column":71}},{"start":{"line":33,"column":12},"end":{"line":34,"column":71}}],"line":33},"10":{"loc":{"start":{"line":64,"column":12},"end":{"line":65,"column":71}},"type":"if","locations":[{"start":{"line":64,"column":12},"end":{"line":65,"column":71}},{"start":{"line":64,"column":12},"end":{"line":65,"column":71}}],"line":64},"11":{"loc":{"start":{"line":84,"column":12},"end":{"line":85,"column":71}},"type":"if","locations":[{"start":{"line":84,"column":12},"end":{"line":85,"column":71}},{"start":{"line":84,"column":12},"end":{"line":85,"column":71}}],"line":84}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":1,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":1,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":1,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":1,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":1,"79":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":2,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[2,0],"7":[2,2],"8":[0],"9":[0,0],"10":[0,0],"11":[0,0]},"inputSourceMap":{"version":3,"file":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/user/controller.ts","sources":["/home/luck/projetos/portfolio/e-commerce/packages/server/src/user/controller.ts"],"names":[],"mappings":"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","sourcesContent":["import { RequestHandler } from \"express\";\nimport { IUserCreateRequest, IUserUpdateRequest } from \"../interfaces/IUser\";\nimport { BadRequest } from \"../utils/errors/BadRequest\";\nimport Logger from \"../utils/logger\";\nimport UserService from \"./service\";\n\nexport default class UserController {\n  private _service: UserService;\n\n  constructor(service = new UserService()) {\n    this._service = service;\n  }\n\n  public getAll: RequestHandler = async (_req, res, next) => {\n    try {\n      const allUsers = await this._service.getAll();\n\n      res.status(200).json(allUsers);\n\n      Logger.save(\"getAll() success\");\n    } catch (error) {\n      Logger.save(\"getAll() fail\");\n\n      next(error);\n    }\n  };\n\n  public getById: RequestHandler = async (req, res, next) => {\n    const id = parseInt(req.params.id, 10);\n\n    if (isNaN(id)) return next(new BadRequest(\"invalid id\"));\n\n    try {\n      const user = await this._service.getById(id);\n\n      res.status(200).json(user);\n\n      Logger.save(\"getById() success\");\n    } catch (error) {\n      Logger.save(\"getById() fail\");\n\n      next(error);\n    }\n  };\n\n  public create: RequestHandler = async (req, res, next) => {\n    const { email, name, password, isAdmin } = req.body as IUserCreateRequest;\n\n    try {\n      const newUser = await this._service.create({\n        email,\n        name,\n        password,\n        isAdmin,\n      });\n\n      res.status(201).json(newUser);\n\n      Logger.save(\"create() success\");\n    } catch (error) {\n      Logger.save(\"create() fail\");\n\n      next(error);\n    }\n  };\n\n  public update: RequestHandler = async (req, res, next) => {\n    const id = parseInt(req.params.id, 10);\n\n    if (isNaN(id)) return next(new BadRequest(\"invalid id\"));\n\n    const { email, name, password, isAdmin } = req.body as IUserUpdateRequest;\n\n    try {\n      const updatedUser = await this._service.update(id, {\n        email,\n        name,\n        password,\n        isAdmin,\n      });\n\n      res.status(200).json(updatedUser);\n\n      Logger.save(\"update() success\");\n    } catch (error) {\n      Logger.save(\"update() fail\");\n\n      next(error);\n    }\n  };\n\n  public delete: RequestHandler = async (req, res, next) => {\n    const id = parseInt(req.params.id, 10);\n\n    if (isNaN(id)) return next(new BadRequest(\"invalid id\"));\n\n    try {\n      await this._service.delete(id);\n\n      res.status(204).end();\n\n      Logger.save(\"delete() success\");\n    } catch (error) {\n      Logger.save(\"delete() fail\");\n\n      next(error);\n    }\n  };\n\n  public login: RequestHandler = async (req, res, next) => {\n    const { email, password } = req.body;\n\n    try {\n      const token = await this._service.login(email, password);\n\n      res.status(200).json(token);\n\n      Logger.save(\"login() success\");\n    } catch (error) {\n      Logger.save(\"login() fail\");\n\n      next(error);\n    }\n  };\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"687bdef166c10080003f97509ecd9530527f01e0","contentHash":"f694697e2d7f53e07cf08115bccab42cfe94e2568399140fa1f4923052585c67"},"/home/luck/projetos/portfolio/e-commerce/packages/server/src/utils/errors/BadRequest.ts":{"path":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/utils/errors/BadRequest.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":28}},"4":{"start":{"line":7,"column":20},"end":{"line":7,"column":59}},"5":{"start":{"line":10,"column":8},"end":{"line":10,"column":23}},"6":{"start":{"line":11,"column":8},"end":{"line":11,"column":33}},"7":{"start":{"line":12,"column":8},"end":{"line":12,"column":33}},"8":{"start":{"line":15,"column":0},"end":{"line":15,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":41},"end":{"line":13,"column":5}},"line":9}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":9,"column":25},"end":{"line":9,"column":39}},"type":"default-arg","locations":[{"start":{"line":9,"column":36},"end":{"line":9,"column":39}}],"line":9}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":1},"f":{"0":1,"1":0},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[0]},"inputSourceMap":{"version":3,"file":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/utils/errors/BadRequest.ts","sources":["/home/luck/projetos/portfolio/e-commerce/packages/server/src/utils/errors/BadRequest.ts"],"names":[],"mappings":";;;;;;AAAA,4DAAoC;AAEpC,MAAa,UAAW,SAAQ,mBAAS;IAKvC,YAAY,OAAe,EAAE,QAAQ,GAAG,GAAG;QACzC,KAAK,CAAC,OAAO,CAAC,CAAC;QAEf,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,IAAI,GAAG,YAAY,CAAC;IAC3B,CAAC;CACF;AAXD,gCAWC","sourcesContent":["import HttpError from './HttpError';\n\nexport class BadRequest extends HttpError {\n  public httpCode: number;\n\n  public name: string;\n\n  constructor(message: string, httpCode = 400) {\n    super(message);\n\n    this.httpCode = httpCode;\n    this.name = 'BadRequest';\n  }\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4d018bd4116bf70aab617f9614689e114cdbcb66","contentHash":"1d7f38cfb1eaa4309b55fd4bd2f06b3db19caf2dd011e73790847071ce67b41e"},"/home/luck/projetos/portfolio/e-commerce/packages/server/src/utils/errors/HttpError.ts":{"path":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/utils/errors/HttpError.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":5,"column":0},"end":{"line":5,"column":28}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/utils/errors/HttpError.ts","sources":["/home/luck/projetos/portfolio/e-commerce/packages/server/src/utils/errors/HttpError.ts"],"names":[],"mappings":";;AAAA,MAA8B,SAAU,SAAQ,KAAK;CAIpD;AAJD,4BAIC","sourcesContent":["export default abstract class HttpError extends Error {\n  public abstract httpCode: number;\n\n  public abstract name: string;\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b73cad450a4196ea1f72c3f618c1f376677018de","contentHash":"c60a4207b9fdcf6a08808061c0c7fb3e81a99501c3e9684a066ce0b0cc9977cd"},"/home/luck/projetos/portfolio/e-commerce/packages/server/src/utils/logger.ts":{"path":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/utils/logger.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":19},"end":{"line":15,"column":58}},"16":{"start":{"line":16,"column":15},"end":{"line":16,"column":47}},"17":{"start":{"line":19,"column":8},"end":{"line":22,"column":11}},"18":{"start":{"line":20,"column":29},"end":{"line":20,"column":79}},"19":{"start":{"line":21,"column":12},"end":{"line":21,"column":84}},"20":{"start":{"line":25,"column":0},"end":{"line":25,"column":71}},"21":{"start":{"line":26,"column":0},"end":{"line":26,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":18,"column":4},"end":{"line":18,"column":5}},"loc":{"start":{"line":18,"column":22},"end":{"line":23,"column":5}},"line":18},"9":{"name":"(anonymous_9)","decl":{"start":{"line":19,"column":47},"end":{"line":19,"column":48}},"loc":{"start":{"line":19,"column":60},"end":{"line":22,"column":9}},"line":19}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":2,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":1,"21":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":2,"8":0,"9":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[0,2],"7":[2,2]},"inputSourceMap":{"version":3,"file":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/utils/logger.ts","sources":["/home/luck/projetos/portfolio/e-commerce/packages/server/src/utils/logger.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,2DAA6B;AAC7B,gDAAwB;AAExB,MAAqB,MAAM;IAGlB,MAAM,CAAO,IAAI,CAAC,IAAY;;YACnC,MAAM,QAAQ,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC,cAAc,CAAC,OAAO,CAAC,KAAK,IAAI,IAAI,CAAC;YAEpE,kBAAE,CAAC,SAAS,CAAC,MAAM,CAAC,SAAS,EAAE,QAAQ,EAAE,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC,CAAC;QAC1D,CAAC;KAAA;;AANc,gBAAS,GAAG,cAAI,CAAC,OAAO,CAAC,SAAS,EAAE,gBAAgB,CAAC,CAAC;kBADlD,MAAM","sourcesContent":["import fs from 'fs/promises';\nimport path from 'path';\n\nexport default class Logger {\n  private static _filePath = path.resolve(__dirname, '../../logs.txt');\n\n  public static async save(info: string): Promise<void> {\n    const sentence = `${new Date().toLocaleString('pt-BR')}: ${info}\\n`;\n\n    fs.writeFile(Logger._filePath, sentence, { flag: 'a' });\n  }\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5f8d8075ef373262492d67259264ef7358cb257a","contentHash":"29c240252180681e399d69d57ffc634b35653c8a1f514510245b400eb7fd8777"},"/home/luck/projetos/portfolio/e-commerce/packages/server/src/user/service.ts":{"path":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/user/service.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":19},"end":{"line":15,"column":54}},"16":{"start":{"line":16,"column":19},"end":{"line":16,"column":54}},"17":{"start":{"line":17,"column":23},"end":{"line":17,"column":62}},"18":{"start":{"line":18,"column":19},"end":{"line":18,"column":64}},"19":{"start":{"line":19,"column":21},"end":{"line":19,"column":61}},"20":{"start":{"line":20,"column":19},"end":{"line":20,"column":55}},"21":{"start":{"line":23,"column":8},"end":{"line":23,"column":38}},"22":{"start":{"line":26,"column":8},"end":{"line":28,"column":11}},"23":{"start":{"line":27,"column":12},"end":{"line":27,"column":45}},"24":{"start":{"line":31,"column":8},"end":{"line":36,"column":11}},"25":{"start":{"line":32,"column":25},"end":{"line":32,"column":59}},"26":{"start":{"line":33,"column":12},"end":{"line":34,"column":64}},"27":{"start":{"line":34,"column":16},"end":{"line":34,"column":64}},"28":{"start":{"line":35,"column":12},"end":{"line":35,"column":24}},"29":{"start":{"line":39,"column":8},"end":{"line":45,"column":11}},"30":{"start":{"line":40,"column":31},"end":{"line":40,"column":79}},"31":{"start":{"line":41,"column":12},"end":{"line":42,"column":69}},"32":{"start":{"line":42,"column":16},"end":{"line":42,"column":69}},"33":{"start":{"line":43,"column":12},"end":{"line":43,"column":83}},"34":{"start":{"line":44,"column":12},"end":{"line":44,"column":52}},"35":{"start":{"line":48,"column":8},"end":{"line":58,"column":11}},"36":{"start":{"line":49,"column":25},"end":{"line":49,"column":59}},"37":{"start":{"line":50,"column":12},"end":{"line":51,"column":64}},"38":{"start":{"line":51,"column":16},"end":{"line":51,"column":64}},"39":{"start":{"line":52,"column":12},"end":{"line":56,"column":13}},"40":{"start":{"line":53,"column":35},"end":{"line":53,"column":83}},"41":{"start":{"line":54,"column":16},"end":{"line":55,"column":74}},"42":{"start":{"line":55,"column":20},"end":{"line":55,"column":74}},"43":{"start":{"line":57,"column":12},"end":{"line":57,"column":56}},"44":{"start":{"line":61,"column":8},"end":{"line":66,"column":11}},"45":{"start":{"line":62,"column":25},"end":{"line":62,"column":59}},"46":{"start":{"line":63,"column":12},"end":{"line":64,"column":64}},"47":{"start":{"line":64,"column":16},"end":{"line":64,"column":64}},"48":{"start":{"line":65,"column":12},"end":{"line":65,"column":47}},"49":{"start":{"line":69,"column":8},"end":{"line":81,"column":11}},"50":{"start":{"line":70,"column":29},"end":{"line":70,"column":53}},"51":{"start":{"line":71,"column":25},"end":{"line":71,"column":65}},"52":{"start":{"line":72,"column":12},"end":{"line":73,"column":64}},"53":{"start":{"line":73,"column":16},"end":{"line":73,"column":64}},"54":{"start":{"line":74,"column":34},"end":{"line":74,"column":91}},"55":{"start":{"line":75,"column":12},"end":{"line":76,"column":81}},"56":{"start":{"line":76,"column":16},"end":{"line":76,"column":81}},"57":{"start":{"line":77,"column":12},"end":{"line":80,"column":14}},"58":{"start":{"line":84,"column":0},"end":{"line":84,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":22,"column":4},"end":{"line":22,"column":5}},"loc":{"start":{"line":22,"column":57},"end":{"line":24,"column":5}},"line":22},"9":{"name":"(anonymous_9)","decl":{"start":{"line":25,"column":4},"end":{"line":25,"column":5}},"loc":{"start":{"line":25,"column":13},"end":{"line":29,"column":5}},"line":25},"10":{"name":"(anonymous_10)","decl":{"start":{"line":26,"column":47},"end":{"line":26,"column":48}},"loc":{"start":{"line":26,"column":60},"end":{"line":28,"column":9}},"line":26},"11":{"name":"(anonymous_11)","decl":{"start":{"line":30,"column":4},"end":{"line":30,"column":5}},"loc":{"start":{"line":30,"column":16},"end":{"line":37,"column":5}},"line":30},"12":{"name":"(anonymous_12)","decl":{"start":{"line":31,"column":47},"end":{"line":31,"column":48}},"loc":{"start":{"line":31,"column":60},"end":{"line":36,"column":9}},"line":31},"13":{"name":"(anonymous_13)","decl":{"start":{"line":38,"column":4},"end":{"line":38,"column":5}},"loc":{"start":{"line":38,"column":20},"end":{"line":46,"column":5}},"line":38},"14":{"name":"(anonymous_14)","decl":{"start":{"line":39,"column":47},"end":{"line":39,"column":48}},"loc":{"start":{"line":39,"column":60},"end":{"line":45,"column":9}},"line":39},"15":{"name":"(anonymous_15)","decl":{"start":{"line":47,"column":4},"end":{"line":47,"column":5}},"loc":{"start":{"line":47,"column":24},"end":{"line":59,"column":5}},"line":47},"16":{"name":"(anonymous_16)","decl":{"start":{"line":48,"column":47},"end":{"line":48,"column":48}},"loc":{"start":{"line":48,"column":60},"end":{"line":58,"column":9}},"line":48},"17":{"name":"(anonymous_17)","decl":{"start":{"line":60,"column":4},"end":{"line":60,"column":5}},"loc":{"start":{"line":60,"column":15},"end":{"line":67,"column":5}},"line":60},"18":{"name":"(anonymous_18)","decl":{"start":{"line":61,"column":47},"end":{"line":61,"column":48}},"loc":{"start":{"line":61,"column":60},"end":{"line":66,"column":9}},"line":61},"19":{"name":"(anonymous_19)","decl":{"start":{"line":68,"column":4},"end":{"line":68,"column":5}},"loc":{"start":{"line":68,"column":27},"end":{"line":82,"column":5}},"line":68},"20":{"name":"(anonymous_20)","decl":{"start":{"line":69,"column":47},"end":{"line":69,"column":48}},"loc":{"start":{"line":69,"column":60},"end":{"line":81,"column":9}},"line":69}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":22,"column":16},"end":{"line":22,"column":55}},"type":"default-arg","locations":[{"start":{"line":22,"column":29},"end":{"line":22,"column":55}}],"line":22},"9":{"loc":{"start":{"line":33,"column":12},"end":{"line":34,"column":64}},"type":"if","locations":[{"start":{"line":33,"column":12},"end":{"line":34,"column":64}},{"start":{"line":33,"column":12},"end":{"line":34,"column":64}}],"line":33},"10":{"loc":{"start":{"line":41,"column":12},"end":{"line":42,"column":69}},"type":"if","locations":[{"start":{"line":41,"column":12},"end":{"line":42,"column":69}},{"start":{"line":41,"column":12},"end":{"line":42,"column":69}}],"line":41},"11":{"loc":{"start":{"line":50,"column":12},"end":{"line":51,"column":64}},"type":"if","locations":[{"start":{"line":50,"column":12},"end":{"line":51,"column":64}},{"start":{"line":50,"column":12},"end":{"line":51,"column":64}}],"line":50},"12":{"loc":{"start":{"line":52,"column":12},"end":{"line":56,"column":13}},"type":"if","locations":[{"start":{"line":52,"column":12},"end":{"line":56,"column":13}},{"start":{"line":52,"column":12},"end":{"line":56,"column":13}}],"line":52},"13":{"loc":{"start":{"line":52,"column":16},"end":{"line":52,"column":61}},"type":"binary-expr","locations":[{"start":{"line":52,"column":16},"end":{"line":52,"column":29}},{"start":{"line":52,"column":33},"end":{"line":52,"column":61}}],"line":52},"14":{"loc":{"start":{"line":54,"column":16},"end":{"line":55,"column":74}},"type":"if","locations":[{"start":{"line":54,"column":16},"end":{"line":55,"column":74}},{"start":{"line":54,"column":16},"end":{"line":55,"column":74}}],"line":54},"15":{"loc":{"start":{"line":63,"column":12},"end":{"line":64,"column":64}},"type":"if","locations":[{"start":{"line":63,"column":12},"end":{"line":64,"column":64}},{"start":{"line":63,"column":12},"end":{"line":64,"column":64}}],"line":63},"16":{"loc":{"start":{"line":72,"column":12},"end":{"line":73,"column":64}},"type":"if","locations":[{"start":{"line":72,"column":12},"end":{"line":73,"column":64}},{"start":{"line":72,"column":12},"end":{"line":73,"column":64}}],"line":72},"17":{"loc":{"start":{"line":75,"column":12},"end":{"line":76,"column":81}},"type":"if","locations":[{"start":{"line":75,"column":12},"end":{"line":76,"column":81}},{"start":{"line":75,"column":12},"end":{"line":76,"column":81}}],"line":75}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":3,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":3,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[2,1],"7":[3,3],"8":[0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0]},"inputSourceMap":{"version":3,"file":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/user/service.ts","sources":["/home/luck/projetos/portfolio/e-commerce/packages/server/src/user/service.ts"],"names":[],"mappings":"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","sourcesContent":["import { IUser, IUserCreateRequest, IUserUpdateRequest, IUserToken } from \"../interfaces/IUser\";\nimport { Conflict } from \"../utils/errors/Conflict\";\nimport { NotFound } from \"../utils/errors/NotFound\";\nimport { Unauthorized } from \"../utils/errors/Unauthorized\";\nimport JwtToken from \"../utils/jwtToken\";\nimport UserRepository from \"./repository\";\nimport bcrypt from \"bcryptjs\";\n\nexport default class UserService {\n  private _repository: UserRepository;\n\n  constructor(repository = new UserRepository()) {\n    this._repository = repository;\n  }\n\n  public async getAll(): Promise<IUser[]> {\n    return this._repository.getAll();\n  }\n\n  public async getById(id: number): Promise<IUser> {\n    const user = await this._repository.getById(id);\n\n    if (!user) throw new NotFound(\"user not found\");\n\n    return user;\n  }\n\n  public async create(newUser: IUserCreateRequest): Promise<IUser> {\n    const userExists = await this._repository.getByEmail(newUser.email);\n\n    if (userExists) throw new Conflict(\"user already exists\");\n\n    newUser.password = await bcrypt.hash(newUser.password, 10);\n\n    return this._repository.create(newUser);\n  }\n\n  public async update(id: number, payload: IUserUpdateRequest): Promise<IUser> {\n    const user = await this._repository.getById(id);\n\n    if (!user) throw new NotFound(\"user not found\");\n\n    if(payload.email && user.email !== payload.email) {\n      const userExists = await this._repository.getByEmail(payload.email);\n      if(userExists) throw new Conflict(\"email already exists\");\n    }\n\n\n    return this._repository.update(id, payload);\n  }\n\n  public async delete(id: number): Promise<IUser> {\n    const user = await this._repository.getById(id);\n\n    if (!user) throw new NotFound(\"user not found\");\n\n    return this._repository.delete(id);\n  }\n\n  public async login(email: string, password: string): Promise<IUserToken> {\n    const jwtToken = new JwtToken();\n    const user = await this._repository.getByEmail(email);\n\n    if (!user) throw new NotFound(\"user not found\");\n\n    const passwordMatch = await bcrypt.compare(password, user.password);\n\n    if (!passwordMatch) throw new Unauthorized(\"password does not match\");\n\n    return {\n        token: jwtToken.sign({ id: user.id }),\n        expiresAt: new Date(Date.now() + 86400000) // 1 day\n    };\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a3b568c1e5d317aad8901dcc07af43c95a8b658e","contentHash":"36ce4c8e414cfb6b1b88319fb049625d762cc104de91b58da11c79183421189d"},"/home/luck/projetos/portfolio/e-commerce/packages/server/src/utils/errors/Conflict.ts":{"path":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/utils/errors/Conflict.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":26}},"4":{"start":{"line":7,"column":20},"end":{"line":7,"column":59}},"5":{"start":{"line":10,"column":8},"end":{"line":10,"column":23}},"6":{"start":{"line":11,"column":8},"end":{"line":11,"column":33}},"7":{"start":{"line":12,"column":8},"end":{"line":12,"column":31}},"8":{"start":{"line":15,"column":0},"end":{"line":15,"column":28}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":41},"end":{"line":13,"column":5}},"line":9}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":9,"column":25},"end":{"line":9,"column":39}},"type":"default-arg","locations":[{"start":{"line":9,"column":36},"end":{"line":9,"column":39}}],"line":9}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":1},"f":{"0":1,"1":0},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[0]},"inputSourceMap":{"version":3,"file":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/utils/errors/Conflict.ts","sources":["/home/luck/projetos/portfolio/e-commerce/packages/server/src/utils/errors/Conflict.ts"],"names":[],"mappings":";;;;;;AAAA,4DAAoC;AAEpC,MAAa,QAAS,SAAQ,mBAAS;IAKrC,YAAY,OAAe,EAAE,QAAQ,GAAG,GAAG;QACzC,KAAK,CAAC,OAAO,CAAC,CAAC;QAEf,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,IAAI,GAAG,UAAU,CAAC;IACzB,CAAC;CACF;AAXD,4BAWC","sourcesContent":["import HttpError from './HttpError';\n\nexport class Conflict extends HttpError {\n  public httpCode: number;\n\n  public name: string;\n\n  constructor(message: string, httpCode = 409) {\n    super(message);\n\n    this.httpCode = httpCode;\n    this.name = 'Conflict';\n  }\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"536db134974845bacf717d7d7613e784d3d65ef3","contentHash":"51831c6fe8aa2347b8160b9e48a5dda37deff2fd31261cb5644bc6d20507368b"},"/home/luck/projetos/portfolio/e-commerce/packages/server/src/utils/errors/NotFound.ts":{"path":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/utils/errors/NotFound.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":26}},"4":{"start":{"line":7,"column":20},"end":{"line":7,"column":59}},"5":{"start":{"line":10,"column":8},"end":{"line":10,"column":23}},"6":{"start":{"line":11,"column":8},"end":{"line":11,"column":33}},"7":{"start":{"line":12,"column":8},"end":{"line":12,"column":31}},"8":{"start":{"line":15,"column":0},"end":{"line":15,"column":28}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":41},"end":{"line":13,"column":5}},"line":9}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":9,"column":25},"end":{"line":9,"column":39}},"type":"default-arg","locations":[{"start":{"line":9,"column":36},"end":{"line":9,"column":39}}],"line":9}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":1},"f":{"0":1,"1":0},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[0]},"inputSourceMap":{"version":3,"file":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/utils/errors/NotFound.ts","sources":["/home/luck/projetos/portfolio/e-commerce/packages/server/src/utils/errors/NotFound.ts"],"names":[],"mappings":";;;;;;AAAA,4DAAoC;AAEpC,MAAa,QAAS,SAAQ,mBAAS;IAKrC,YAAY,OAAe,EAAE,QAAQ,GAAG,GAAG;QACzC,KAAK,CAAC,OAAO,CAAC,CAAC;QAEf,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,IAAI,GAAG,UAAU,CAAC;IACzB,CAAC;CACF;AAXD,4BAWC","sourcesContent":["import HttpError from './HttpError';\n\nexport class NotFound extends HttpError {\n  public httpCode: number;\n\n  public name: string;\n\n  constructor(message: string, httpCode = 404) {\n    super(message);\n\n    this.httpCode = httpCode;\n    this.name = 'NotFound';\n  }\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d9b88e99b19cdd47589425d2d6b08a33524aad36","contentHash":"2b638d7c3731dcdb9e96eee33750c30284fe27bcb492096adedc03c776ad44ba"},"/home/luck/projetos/portfolio/e-commerce/packages/server/src/utils/errors/Unauthorized.ts":{"path":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/utils/errors/Unauthorized.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":30}},"4":{"start":{"line":7,"column":20},"end":{"line":7,"column":59}},"5":{"start":{"line":10,"column":8},"end":{"line":10,"column":23}},"6":{"start":{"line":11,"column":8},"end":{"line":11,"column":33}},"7":{"start":{"line":12,"column":8},"end":{"line":12,"column":35}},"8":{"start":{"line":15,"column":0},"end":{"line":15,"column":36}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":41},"end":{"line":13,"column":5}},"line":9}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":9,"column":25},"end":{"line":9,"column":39}},"type":"default-arg","locations":[{"start":{"line":9,"column":36},"end":{"line":9,"column":39}}],"line":9}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":1},"f":{"0":1,"1":0},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[0]},"inputSourceMap":{"version":3,"file":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/utils/errors/Unauthorized.ts","sources":["/home/luck/projetos/portfolio/e-commerce/packages/server/src/utils/errors/Unauthorized.ts"],"names":[],"mappings":";;;;;;AAAA,4DAAoC;AAEpC,MAAa,YAAa,SAAQ,mBAAS;IAKzC,YAAY,OAAe,EAAE,QAAQ,GAAG,GAAG;QACzC,KAAK,CAAC,OAAO,CAAC,CAAC;QAEf,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,IAAI,GAAG,cAAc,CAAC;IAC7B,CAAC;CACF;AAXD,oCAWC","sourcesContent":["import HttpError from './HttpError';\n\nexport class Unauthorized extends HttpError {\n  public httpCode: number;\n\n  public name: string;\n\n  constructor(message: string, httpCode = 401) {\n    super(message);\n\n    this.httpCode = httpCode;\n    this.name = 'Unauthorized';\n  }\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2c41508b87c0152bd85867f63cac8f7b3dedcd20","contentHash":"5c095a7adddc99491ca5e411171a3c506238f6587452f39f4968c4188ef9d90b"},"/home/luck/projetos/portfolio/e-commerce/packages/server/src/utils/jwtToken.ts":{"path":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/utils/jwtToken.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":0},"end":{"line":25,"column":62}},"25":{"start":{"line":26,"column":12},"end":{"line":26,"column":49}},"26":{"start":{"line":29,"column":8},"end":{"line":29,"column":55}},"27":{"start":{"line":32,"column":8},"end":{"line":32,"column":67}},"28":{"start":{"line":35,"column":8},"end":{"line":35,"column":46}},"29":{"start":{"line":38,"column":0},"end":{"line":38,"column":27}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":28,"column":4},"end":{"line":28,"column":5}},"loc":{"start":{"line":28,"column":18},"end":{"line":30,"column":5}},"line":28},"7":{"name":"(anonymous_7)","decl":{"start":{"line":31,"column":4},"end":{"line":31,"column":5}},"loc":{"start":{"line":31,"column":18},"end":{"line":33,"column":5}},"line":31},"8":{"name":"(anonymous_8)","decl":{"start":{"line":34,"column":4},"end":{"line":34,"column":5}},"loc":{"start":{"line":34,"column":18},"end":{"line":36,"column":5}},"line":34}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":29,"column":22},"end":{"line":29,"column":54}},"type":"binary-expr","locations":[{"start":{"line":29,"column":22},"end":{"line":29,"column":44}},{"start":{"line":29,"column":48},"end":{"line":29,"column":54}}],"line":29}},"s":{"0":1,"1":6,"2":6,"3":6,"4":6,"5":6,"6":0,"7":6,"8":0,"9":0,"10":0,"11":1,"12":1,"13":0,"14":1,"15":1,"16":0,"17":1,"18":1,"19":1,"20":6,"21":6,"22":1,"23":1,"24":1,"25":1,"26":0,"27":0,"28":0,"29":1},"f":{"0":6,"1":0,"2":0,"3":1,"4":0,"5":1,"6":0,"7":0,"8":0},"b":{"0":[1,1,1],"1":[1,0],"2":[6,0],"3":[6,0],"4":[6,6],"5":[0,6],"6":[6,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[0,1],"12":[1,1],"13":[1,0],"14":[6,0],"15":[6,6],"16":[0,0]},"inputSourceMap":{"version":3,"file":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/utils/jwtToken.ts","sources":["/home/luck/projetos/portfolio/e-commerce/packages/server/src/utils/jwtToken.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,kDAAoC;AAEpC,MAAqB,QAAQ;IAA7B;QACU,WAAM,GAAG,OAAO,CAAC,GAAG,CAAC,UAAU,IAAI,MAAM,CAAC;IASpD,CAAC;IAPC,IAAI,CAAC,OAAqB;QACxB,OAAO,GAAG,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,MAAM,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC;IAC7D,CAAC;IAED,MAAM,CAAC,KAAa;QAClB,OAAO,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;IACxC,CAAC;CACF;AAVD,2BAUC","sourcesContent":["import * as jwt from 'jsonwebtoken';\n\nexport default class JwtToken {\n  private secret = process.env.JWT_SECRET || 'what';\n\n  sign(payload: {id: number}): string {\n    return jwt.sign(payload, this.secret, { expiresIn: '1d' });\n  }\n\n  verify(token: string): any {\n    return jwt.verify(token, this.secret);\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"159c867f98868316660ce184b457b08cc0a0e483","contentHash":"0d79b29f288dd015084acc91a4c63bf847c6c721cb40886f7d54d8641069696a"},"/home/luck/projetos/portfolio/e-commerce/packages/server/src/user/repository.ts":{"path":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/user/repository.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":0},"end":{"line":11,"column":62}},"13":{"start":{"line":12,"column":17},"end":{"line":12,"column":42}},"14":{"start":{"line":15,"column":8},"end":{"line":15,"column":30}},"15":{"start":{"line":18,"column":8},"end":{"line":20,"column":11}},"16":{"start":{"line":19,"column":12},"end":{"line":19,"column":48}},"17":{"start":{"line":23,"column":8},"end":{"line":25,"column":11}},"18":{"start":{"line":24,"column":12},"end":{"line":24,"column":67}},"19":{"start":{"line":28,"column":8},"end":{"line":30,"column":11}},"20":{"start":{"line":29,"column":12},"end":{"line":29,"column":70}},"21":{"start":{"line":33,"column":8},"end":{"line":35,"column":11}},"22":{"start":{"line":34,"column":12},"end":{"line":34,"column":63}},"23":{"start":{"line":38,"column":8},"end":{"line":40,"column":11}},"24":{"start":{"line":39,"column":12},"end":{"line":39,"column":78}},"25":{"start":{"line":43,"column":8},"end":{"line":45,"column":11}},"26":{"start":{"line":44,"column":12},"end":{"line":44,"column":63}},"27":{"start":{"line":48,"column":0},"end":{"line":48,"column":33}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":14,"column":4},"end":{"line":14,"column":5}},"loc":{"start":{"line":14,"column":54},"end":{"line":16,"column":5}},"line":14},"8":{"name":"(anonymous_8)","decl":{"start":{"line":17,"column":4},"end":{"line":17,"column":5}},"loc":{"start":{"line":17,"column":13},"end":{"line":21,"column":5}},"line":17},"9":{"name":"(anonymous_9)","decl":{"start":{"line":18,"column":47},"end":{"line":18,"column":48}},"loc":{"start":{"line":18,"column":60},"end":{"line":20,"column":9}},"line":18},"10":{"name":"(anonymous_10)","decl":{"start":{"line":22,"column":4},"end":{"line":22,"column":5}},"loc":{"start":{"line":22,"column":16},"end":{"line":26,"column":5}},"line":22},"11":{"name":"(anonymous_11)","decl":{"start":{"line":23,"column":47},"end":{"line":23,"column":48}},"loc":{"start":{"line":23,"column":60},"end":{"line":25,"column":9}},"line":23},"12":{"name":"(anonymous_12)","decl":{"start":{"line":27,"column":4},"end":{"line":27,"column":5}},"loc":{"start":{"line":27,"column":22},"end":{"line":31,"column":5}},"line":27},"13":{"name":"(anonymous_13)","decl":{"start":{"line":28,"column":47},"end":{"line":28,"column":48}},"loc":{"start":{"line":28,"column":60},"end":{"line":30,"column":9}},"line":28},"14":{"name":"(anonymous_14)","decl":{"start":{"line":32,"column":4},"end":{"line":32,"column":5}},"loc":{"start":{"line":32,"column":20},"end":{"line":36,"column":5}},"line":32},"15":{"name":"(anonymous_15)","decl":{"start":{"line":33,"column":47},"end":{"line":33,"column":48}},"loc":{"start":{"line":33,"column":60},"end":{"line":35,"column":9}},"line":33},"16":{"name":"(anonymous_16)","decl":{"start":{"line":37,"column":4},"end":{"line":37,"column":5}},"loc":{"start":{"line":37,"column":24},"end":{"line":41,"column":5}},"line":37},"17":{"name":"(anonymous_17)","decl":{"start":{"line":38,"column":47},"end":{"line":38,"column":48}},"loc":{"start":{"line":38,"column":60},"end":{"line":40,"column":9}},"line":38},"18":{"name":"(anonymous_18)","decl":{"start":{"line":42,"column":4},"end":{"line":42,"column":5}},"loc":{"start":{"line":42,"column":15},"end":{"line":46,"column":5}},"line":42},"19":{"name":"(anonymous_19)","decl":{"start":{"line":43,"column":47},"end":{"line":43,"column":48}},"loc":{"start":{"line":43,"column":60},"end":{"line":45,"column":9}},"line":43}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":14,"column":16},"end":{"line":14,"column":52}},"type":"default-arg","locations":[{"start":{"line":14,"column":25},"end":{"line":14,"column":52}}],"line":14}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0]},"inputSourceMap":{"version":3,"file":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/user/repository.ts","sources":["/home/luck/projetos/portfolio/e-commerce/packages/server/src/user/repository.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,2CAA8C;AAG9C,MAAqB,cAAc;IAGjC,YAAY,MAAM,GAAG,IAAI,qBAAY,EAAE;QACrC,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;IACxB,CAAC;IAEY,MAAM;;YACjB,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;QACtC,CAAC;KAAA;IAEY,OAAO,CAAC,EAAU;;YAC7B,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;QACzD,CAAC;KAAA;IAEY,UAAU,CAAC,KAAa;;YACnC,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,KAAK,EAAE,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC;QAC5D,CAAC;KAAA;IAEY,MAAM,CAAC,OAA2B;;YAC7C,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC;QACrD,CAAC;KAAA;IAEY,MAAM,CAAC,EAAU,EAAE,OAA2B;;YACzD,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC;QACpE,CAAC;KAAA;IAEY,MAAM,CAAC,EAAU;;YAC5B,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;QACrD,CAAC;KAAA;CACF;AA9BD,iCA8BC","sourcesContent":["import { PrismaClient } from '@prisma/client';\nimport { IUser, IUserCreateRequest, IUserUpdateRequest } from '../interfaces/IUser';\n\nexport default class UserRepository {\n  private _prisma: PrismaClient;\n\n  constructor(prisma = new PrismaClient()) {\n    this._prisma = prisma;\n  }\n\n  public async getAll(): Promise<IUser[]> {\n    return this._prisma.user.findMany();\n  }\n\n  public async getById(id: number): Promise<IUser | null> {\n    return this._prisma.user.findUnique({ where: { id } });\n  }\n\n  public async getByEmail(email: string): Promise<IUser | null> {\n    return this._prisma.user.findUnique({ where: { email } });\n  }\n\n  public async create(newUser: IUserCreateRequest): Promise<IUser> {\n    return this._prisma.user.create({ data: newUser });\n  }\n\n  public async update(id: number, payload: IUserUpdateRequest): Promise<IUser> {\n    return this._prisma.user.update({ where: { id }, data: payload });\n  }\n\n  public async delete(id: number): Promise<IUser> {\n    return this._prisma.user.delete({ where: { id } });\n  }\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9f5519f860df144d8c9a54d2503405f00d56d550","contentHash":"084658a8171686b2a04a81abf0f93a6fba6d4e481f682d69df31bf7d05afdb4b"},"/home/luck/projetos/portfolio/e-commerce/packages/server/src/user/router.ts":{"path":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/user/router.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":36}},"4":{"start":{"line":7,"column":15},"end":{"line":7,"column":62}},"5":{"start":{"line":8,"column":21},"end":{"line":8,"column":61}},"6":{"start":{"line":9,"column":15},"end":{"line":9,"column":62}},"7":{"start":{"line":12,"column":8},"end":{"line":12,"column":30}},"8":{"start":{"line":13,"column":8},"end":{"line":13,"column":38}},"9":{"start":{"line":14,"column":8},"end":{"line":14,"column":92}},"10":{"start":{"line":15,"column":8},"end":{"line":15,"column":45}},"11":{"start":{"line":16,"column":8},"end":{"line":16,"column":55}},"12":{"start":{"line":17,"column":8},"end":{"line":17,"column":59}},"13":{"start":{"line":18,"column":8},"end":{"line":18,"column":89}},"14":{"start":{"line":19,"column":8},"end":{"line":19,"column":91}},"15":{"start":{"line":20,"column":8},"end":{"line":20,"column":61}},"16":{"start":{"line":23,"column":8},"end":{"line":23,"column":28}},"17":{"start":{"line":26,"column":0},"end":{"line":26,"column":29}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":4},"end":{"line":11,"column":5}},"loc":{"start":{"line":11,"column":91},"end":{"line":21,"column":5}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":22,"column":4},"end":{"line":22,"column":5}},"loc":{"start":{"line":22,"column":17},"end":{"line":24,"column":5}},"line":22}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":11,"column":16},"end":{"line":11,"column":48}},"type":"default-arg","locations":[{"start":{"line":11,"column":25},"end":{"line":11,"column":48}}],"line":11},"4":{"loc":{"start":{"line":11,"column":50},"end":{"line":11,"column":89}},"type":"default-arg","locations":[{"start":{"line":11,"column":63},"end":{"line":11,"column":89}}],"line":11}},"s":{"0":1,"1":3,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1},"f":{"0":3,"1":1,"2":1},"b":{"0":[1,1,1],"1":[3,0],"2":[3,3],"3":[0],"4":[0]},"inputSourceMap":{"version":3,"file":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/user/router.ts","sources":["/home/luck/projetos/portfolio/e-commerce/packages/server/src/user/router.ts"],"names":[],"mappings":";;;;;AAAA,qCAAiC;AACjC,+DAA8C;AAC9C,8DAA0C;AAC1C,+DAAiD;AAEjD,MAAqB,UAAU;IAK7B,YAAY,MAAM,GAAG,IAAA,gBAAM,GAAE,EAAE,UAAU,GAAG,IAAI,oBAAc,EAAE;QAC9D,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;QACtB,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;QAE9B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,cAAW,CAAC,eAAe,EAAE,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QACjF,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;QACrC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;QAC/C,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;QACnD,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,EAAE,cAAW,CAAC,gBAAgB,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;QAC9E,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,cAAW,CAAC,gBAAgB,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;QAChF,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;IACvD,CAAC;IAED,IAAI,MAAM;QACR,OAAO,IAAI,CAAC,OAAO,CAAC;IACtB,CAAC;CACF;AArBD,6BAqBC","sourcesContent":["import { Router } from 'express';\nimport Middlewares from '../middlewares/User';\nimport UserController from './controller';\nimport AuthMiddleware from '../middlewares/Auth';\n\nexport default class UserRouter {\n  private _router: Router;\n\n  private _controller: UserController;\n\n  constructor(router = Router(), controller = new UserController()) {\n    this._router = router;\n    this._controller = controller;\n\n    this._router.post('/login', Middlewares.loginValidation, this._controller.login);\n    this._router.use(AuthMiddleware.Jwt);\n    this._router.get('/', this._controller.getAll);\n    this._router.get('/:id', this._controller.getById);\n    this._router.post('/', Middlewares.createValidation, this._controller.create);\n    this._router.put('/:id', Middlewares.updateValidation, this._controller.update);\n    this._router.delete('/:id', this._controller.delete);\n  }\n\n  get router() {\n    return this._router;\n  }\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"42be5de46981a81220b87b25d545a41bd49a843a","contentHash":"8e9c2e01c40adb5e32b33d0c6de77bae5e50bdf08065901fdbbd6dd90b4b4732"},"/home/luck/projetos/portfolio/e-commerce/packages/server/src/middlewares/User.ts":{"path":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/middlewares/User.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":14},"end":{"line":6,"column":45}},"4":{"start":{"line":7,"column":21},"end":{"line":7,"column":58}},"5":{"start":{"line":8,"column":21},"end":{"line":8,"column":44}},"6":{"start":{"line":11,"column":0},"end":{"line":16,"column":3}},"7":{"start":{"line":17,"column":0},"end":{"line":22,"column":3}},"8":{"start":{"line":23,"column":0},"end":{"line":26,"column":3}},"9":{"start":{"line":27,"column":0},"end":{"line":38,"column":2}},"10":{"start":{"line":28,"column":47},"end":{"line":28,"column":55}},"11":{"start":{"line":29,"column":22},"end":{"line":34,"column":6}},"12":{"start":{"line":35,"column":4},"end":{"line":36,"column":64}},"13":{"start":{"line":36,"column":8},"end":{"line":36,"column":64}},"14":{"start":{"line":37,"column":4},"end":{"line":37,"column":11}},"15":{"start":{"line":39,"column":0},"end":{"line":50,"column":2}},"16":{"start":{"line":40,"column":47},"end":{"line":40,"column":55}},"17":{"start":{"line":41,"column":22},"end":{"line":46,"column":6}},"18":{"start":{"line":47,"column":4},"end":{"line":48,"column":64}},"19":{"start":{"line":48,"column":8},"end":{"line":48,"column":64}},"20":{"start":{"line":49,"column":4},"end":{"line":49,"column":11}},"21":{"start":{"line":51,"column":0},"end":{"line":60,"column":2}},"22":{"start":{"line":52,"column":32},"end":{"line":52,"column":40}},"23":{"start":{"line":53,"column":22},"end":{"line":56,"column":6}},"24":{"start":{"line":57,"column":4},"end":{"line":58,"column":64}},"25":{"start":{"line":58,"column":8},"end":{"line":58,"column":64}},"26":{"start":{"line":59,"column":4},"end":{"line":59,"column":11}},"27":{"start":{"line":61,"column":0},"end":{"line":61,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":27,"column":35},"end":{"line":27,"column":36}},"loc":{"start":{"line":27,"column":56},"end":{"line":38,"column":1}},"line":27},"2":{"name":"(anonymous_2)","decl":{"start":{"line":39,"column":35},"end":{"line":39,"column":36}},"loc":{"start":{"line":39,"column":56},"end":{"line":50,"column":1}},"line":39},"3":{"name":"(anonymous_3)","decl":{"start":{"line":51,"column":34},"end":{"line":51,"column":35}},"loc":{"start":{"line":51,"column":55},"end":{"line":60,"column":1}},"line":51}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":35,"column":4},"end":{"line":36,"column":64}},"type":"if","locations":[{"start":{"line":35,"column":4},"end":{"line":36,"column":64}},{"start":{"line":35,"column":4},"end":{"line":36,"column":64}}],"line":35},"4":{"loc":{"start":{"line":47,"column":4},"end":{"line":48,"column":64}},"type":"if","locations":[{"start":{"line":47,"column":4},"end":{"line":48,"column":64}},{"start":{"line":47,"column":4},"end":{"line":48,"column":64}}],"line":47},"5":{"loc":{"start":{"line":57,"column":4},"end":{"line":58,"column":64}},"type":"if","locations":[{"start":{"line":57,"column":4},"end":{"line":58,"column":64}},{"start":{"line":57,"column":4},"end":{"line":58,"column":64}}],"line":57}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":0,"23":0,"24":0,"25":0,"26":0,"27":1},"f":{"0":1,"1":0,"2":0,"3":0},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[0,0],"4":[0,0],"5":[0,0]},"inputSourceMap":{"version":3,"file":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/middlewares/User.ts","sources":["/home/luck/projetos/portfolio/e-commerce/packages/server/src/middlewares/User.ts"],"names":[],"mappings":";;;;;AACA,8CAAsB;AACtB,2DAAwD;AAExD,6CAA0C;AAE1C,MAAqB,eAAgB,SAAQ,uBAAU;;AACtC,6BAAa,GAAG,aAAG,CAAC,MAAM,CAAC;IACxC,KAAK,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,KAAK,EAAE,CAAC,QAAQ,EAAE;IACtC,IAAI,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE;IAC7B,QAAQ,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE;IACjC,OAAO,EAAE,aAAG,CAAC,OAAO,EAAE;CACvB,CAAC,CAAC;AAEY,6BAAa,GAAG,aAAG,CAAC,MAAM,CAAC;IACxC,KAAK,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,KAAK,EAAE;IAC3B,IAAI,EAAE,aAAG,CAAC,MAAM,EAAE;IAClB,QAAQ,EAAE,aAAG,CAAC,MAAM,EAAE;IACtB,OAAO,EAAE,aAAG,CAAC,OAAO,EAAE;CACvB,CAAC,CAAC;AAEY,4BAAY,GAAG,aAAG,CAAC,MAAM,CAAC;IACvC,KAAK,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,KAAK,EAAE,CAAC,QAAQ,EAAE;IACtC,QAAQ,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE;CAClC,CAAC,CAAC;AAEW,gCAAgB,GAAmB,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE;IACnE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,QAAQ,EAAE,OAAO,EAAE,GAAG,GAAG,CAAC,IAA0B,CAAC;IAC1E,MAAM,EAAE,KAAK,EAAE,GAAG,eAAe,CAAC,aAAa,CAAC,QAAQ,CAAC;QACvD,KAAK;QACL,IAAI;QACJ,QAAQ;QACR,OAAO;KACR,CAAC,CAAC;IAEH,IAAI,KAAK;QAAE,OAAO,IAAI,CAAC,IAAI,uBAAU,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;IAEtD,IAAI,EAAE,CAAC;AACT,CAAC,CAAC;AAEY,gCAAgB,GAAmB,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE;IACnE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,QAAQ,EAAE,OAAO,EAAE,GAAG,GAAG,CAAC,IAA0B,CAAC;IAC1E,MAAM,EAAE,KAAK,EAAE,GAAG,eAAe,CAAC,aAAa,CAAC,QAAQ,CAAC;QACrD,KAAK;QACL,IAAI;QACJ,QAAQ;QACR,OAAO;KACV,CAAC,CAAC;IAEH,IAAI,KAAK;QAAE,OAAO,IAAI,CAAC,IAAI,uBAAU,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;IAEtD,IAAI,EAAE,CAAC;AACT,CAAC,CAAC;AAEY,+BAAe,GAAmB,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE;IAClE,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,GAAG,CAAC,IAAyB,CAAC;IAC1D,MAAM,EAAE,KAAK,EAAE,GAAG,eAAe,CAAC,YAAY,CAAC,QAAQ,CAAC;QACtD,KAAK;QACL,QAAQ;KACT,CAAC,CAAC;IAEH,IAAI,KAAK;QAAE,OAAO,IAAI,CAAC,IAAI,uBAAU,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;IAEtD,IAAI,EAAE,CAAC;AACT,CAAC,CAAA;kBA1DkB,eAAe","sourcesContent":["import { RequestHandler } from \"express\";\nimport joi from \"joi\";\nimport { BadRequest } from \"../utils/errors/BadRequest\";\nimport { IUserCreateRequest, IUserLoginRequest, IUserUpdateRequest } from \"../interfaces/IUser\";\nimport { Middleware } from \"./Middleware\";\n\nexport default class UserMiddlewares extends Middleware {\n  private static _createSchema = joi.object({\n    email: joi.string().email().required(),\n    name: joi.string().required(),\n    password: joi.string().required(),\n    isAdmin: joi.boolean(),\n  });\n\n  private static _updateSchema = joi.object({\n    email: joi.string().email(),\n    name: joi.string(),\n    password: joi.string(),\n    isAdmin: joi.boolean(),\n  });\n\n  private static _loginSchema = joi.object({\n    email: joi.string().email().required(),\n    password: joi.string().required(),\n  });\n\n  public static createValidation: RequestHandler = (req, _res, next) => {\n    const { email, name, password, isAdmin } = req.body as IUserCreateRequest;\n    const { error } = UserMiddlewares._createSchema.validate({\n      email,\n      name,\n      password,\n      isAdmin,\n    });\n\n    if (error) return next(new BadRequest(error.message));\n\n    next();\n  };\n\n  public static updateValidation: RequestHandler = (req, _res, next) => {\n    const { email, name, password, isAdmin } = req.body as IUserUpdateRequest;\n    const { error } = UserMiddlewares._updateSchema.validate({\n        email,\n        name,\n        password,\n        isAdmin,\n    });\n\n    if (error) return next(new BadRequest(error.message));\n\n    next();\n  };\n\n  public static loginValidation: RequestHandler = (req, _res, next) => {\n    const { email, password } = req.body as IUserLoginRequest;\n    const { error } = UserMiddlewares._loginSchema.validate({\n      email,\n      password,\n    });\n\n    if (error) return next(new BadRequest(error.message));\n\n    next();\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1207be34fde628e95e3284d8151d97a7cf3f025e","contentHash":"dfa8cface23dba60f1343f95a0a957e0dc3522cef49da88ff645c6fe41c0474f"},"/home/luck/projetos/portfolio/e-commerce/packages/server/src/middlewares/Middleware.ts":{"path":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/middlewares/Middleware.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":28}},"4":{"start":{"line":7,"column":20},"end":{"line":7,"column":73}},"5":{"start":{"line":10,"column":0},"end":{"line":10,"column":32}},"6":{"start":{"line":11,"column":0},"end":{"line":17,"column":2}},"7":{"start":{"line":12,"column":4},"end":{"line":15,"column":5}},"8":{"start":{"line":13,"column":38},"end":{"line":13,"column":41}},"9":{"start":{"line":14,"column":8},"end":{"line":14,"column":65}},"10":{"start":{"line":16,"column":4},"end":{"line":16,"column":69}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":19},"end":{"line":11,"column":20}},"loc":{"start":{"line":11,"column":46},"end":{"line":17,"column":1}},"line":11}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":12,"column":4},"end":{"line":15,"column":5}},"type":"if","locations":[{"start":{"line":12,"column":4},"end":{"line":15,"column":5}},{"start":{"line":12,"column":4},"end":{"line":15,"column":5}}],"line":12}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0},"f":{"0":1,"1":0},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[0,0]},"inputSourceMap":{"version":3,"file":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/middlewares/Middleware.ts","sources":["/home/luck/projetos/portfolio/e-commerce/packages/server/src/middlewares/Middleware.ts"],"names":[],"mappings":";;;;;;AACA,0EAAkD;AAElD,MAAsB,UAAU;;AAAhC,gCAUC;AATiB,gBAAK,GAAwB,CAAC,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,KAAK,EAAE,EAAE;IACnE,IAAI,GAAG,YAAY,mBAAS,EAAE;QAC5B,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE,GAAG,GAAG,CAAC;QAElC,OAAO,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,EAAE,OAAO,EAAE,EAAE,CAAC,CAAC;KAC1D;IAED,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,EAAE,OAAO,EAAE,GAAG,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;AACnE,CAAC,CAAC","sourcesContent":["import { ErrorRequestHandler } from \"express\";\nimport HttpError from \"../utils/errors/HttpError\";\n\nexport abstract class Middleware {\n    public static error: ErrorRequestHandler = (err, _req, res, _next) => {\n      if (err instanceof HttpError) {\n        const { httpCode, message } = err;\n  \n        return res.status(httpCode).json({ error: { message } });\n      }\n  \n      return res.status(500).json({ error: { message: err.message } });\n    };\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"65342d3b60578ab5fc4616d96bad37e5484bd856","contentHash":"a878666fe70650ea6fee38a51ae5b7b14e4d8d88ad91a9d369134b61736bc29c"},"/home/luck/projetos/portfolio/e-commerce/packages/server/src/middlewares/Auth.ts":{"path":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/middlewares/Auth.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":23},"end":{"line":6,"column":62}},"4":{"start":{"line":7,"column":19},"end":{"line":7,"column":64}},"5":{"start":{"line":8,"column":21},"end":{"line":8,"column":44}},"6":{"start":{"line":11,"column":0},"end":{"line":25,"column":2}},"7":{"start":{"line":13,"column":21},"end":{"line":13,"column":45}},"8":{"start":{"line":14,"column":18},"end":{"line":14,"column":104}},"9":{"start":{"line":15,"column":4},"end":{"line":16,"column":72}},"10":{"start":{"line":16,"column":8},"end":{"line":16,"column":72}},"11":{"start":{"line":17,"column":4},"end":{"line":24,"column":5}},"12":{"start":{"line":18,"column":24},"end":{"line":18,"column":46}},"13":{"start":{"line":19,"column":8},"end":{"line":19,"column":39}},"14":{"start":{"line":20,"column":8},"end":{"line":20,"column":15}},"15":{"start":{"line":23,"column":8},"end":{"line":23,"column":63}},"16":{"start":{"line":26,"column":0},"end":{"line":26,"column":33}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":21},"end":{"line":11,"column":22}},"loc":{"start":{"line":11,"column":42},"end":{"line":25,"column":1}},"line":11}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":14,"column":18},"end":{"line":14,"column":104}},"type":"cond-expr","locations":[{"start":{"line":14,"column":79},"end":{"line":14,"column":85}},{"start":{"line":14,"column":88},"end":{"line":14,"column":104}}],"line":14},"4":{"loc":{"start":{"line":14,"column":18},"end":{"line":14,"column":76}},"type":"binary-expr","locations":[{"start":{"line":14,"column":18},"end":{"line":14,"column":59}},{"start":{"line":14,"column":63},"end":{"line":14,"column":76}}],"line":14},"5":{"loc":{"start":{"line":15,"column":4},"end":{"line":16,"column":72}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":16,"column":72}},{"start":{"line":15,"column":4},"end":{"line":16,"column":72}}],"line":15}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":1},"f":{"0":1,"1":0},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[0,0],"4":[0,0],"5":[0,0]},"inputSourceMap":{"version":3,"file":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/middlewares/Auth.ts","sources":["/home/luck/projetos/portfolio/e-commerce/packages/server/src/middlewares/Auth.ts"],"names":[],"mappings":";;;;;AACA,+DAA4D;AAC5D,iEAAyC;AACzC,6CAA0C;AAE1C,MAAqB,cAAe,SAAQ,uBAAU;;AAEpC,kBAAG,GAAmB,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE;;IACpD,MAAM,QAAQ,GAAG,IAAI,kBAAQ,EAAE,CAAC;IAEhC,MAAM,KAAK,GAAG,MAAA,GAAG,CAAC,OAAO,CAAC,aAAa,0CAAE,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;IAEvD,IAAI,CAAC,KAAK;QAAE,OAAO,IAAI,CAAC,IAAI,2BAAY,CAAC,iBAAiB,CAAC,CAAC,CAAC;IAE7D,IAAI;QACA,MAAM,OAAO,GAAG,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QAEvC,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG,OAAO,CAAC,EAAE,CAAC;QAE/B,IAAI,EAAE,CAAC;KACV;IAAC,OAAO,KAAK,EAAE;QACZ,IAAI,CAAC,IAAI,2BAAY,CAAC,eAAe,CAAC,CAAC,CAAC;KAC3C;AACL,CAAC,CAAA;kBAlBgB,cAAc","sourcesContent":["import { RequestHandler } from \"express\";\nimport { Unauthorized } from \"../utils/errors/Unauthorized\";\nimport JwtToken from \"../utils/jwtToken\";\nimport { Middleware } from \"./Middleware\";\n\nexport default class AuthMiddleware extends Middleware {\n    \n    public static Jwt: RequestHandler = (req, _res, next) =>  {\n        const jwtToken = new JwtToken();\n        \n        const token = req.headers.authorization?.split(\" \")[1];\n\n        if (!token) return next(new Unauthorized(\"token not found\"));\n\n        try {\n            const payload = jwtToken.verify(token);\n        \n            req.params.userId = payload.id;\n\n            next();\n        } catch (error) {\n            next(new Unauthorized(\"invalid token\"));\n        }\n    }\n    \n\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e87bf418e2e9bd74b4f1febb50bd3f6f98124694","contentHash":"5e4b4d33902be33d32f1225e0a4ce0fb95c01093cf0ea281f89426a160fd7e4c"},"/home/luck/projetos/portfolio/e-commerce/packages/server/src/category/repository.ts":{"path":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/category/repository.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":0},"end":{"line":11,"column":62}},"13":{"start":{"line":12,"column":17},"end":{"line":12,"column":42}},"14":{"start":{"line":15,"column":8},"end":{"line":15,"column":30}},"15":{"start":{"line":18,"column":8},"end":{"line":24,"column":11}},"16":{"start":{"line":19,"column":12},"end":{"line":23,"column":15}},"17":{"start":{"line":27,"column":8},"end":{"line":29,"column":11}},"18":{"start":{"line":28,"column":12},"end":{"line":28,"column":71}},"19":{"start":{"line":32,"column":8},"end":{"line":34,"column":11}},"20":{"start":{"line":33,"column":12},"end":{"line":33,"column":73}},"21":{"start":{"line":37,"column":8},"end":{"line":39,"column":11}},"22":{"start":{"line":38,"column":12},"end":{"line":38,"column":71}},"23":{"start":{"line":42,"column":8},"end":{"line":44,"column":11}},"24":{"start":{"line":43,"column":12},"end":{"line":43,"column":82}},"25":{"start":{"line":47,"column":8},"end":{"line":49,"column":11}},"26":{"start":{"line":48,"column":12},"end":{"line":48,"column":67}},"27":{"start":{"line":52,"column":0},"end":{"line":52,"column":37}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":14,"column":4},"end":{"line":14,"column":5}},"loc":{"start":{"line":14,"column":54},"end":{"line":16,"column":5}},"line":14},"8":{"name":"(anonymous_8)","decl":{"start":{"line":17,"column":4},"end":{"line":17,"column":5}},"loc":{"start":{"line":17,"column":13},"end":{"line":25,"column":5}},"line":17},"9":{"name":"(anonymous_9)","decl":{"start":{"line":18,"column":47},"end":{"line":18,"column":48}},"loc":{"start":{"line":18,"column":60},"end":{"line":24,"column":9}},"line":18},"10":{"name":"(anonymous_10)","decl":{"start":{"line":26,"column":4},"end":{"line":26,"column":5}},"loc":{"start":{"line":26,"column":16},"end":{"line":30,"column":5}},"line":26},"11":{"name":"(anonymous_11)","decl":{"start":{"line":27,"column":47},"end":{"line":27,"column":48}},"loc":{"start":{"line":27,"column":60},"end":{"line":29,"column":9}},"line":27},"12":{"name":"(anonymous_12)","decl":{"start":{"line":31,"column":4},"end":{"line":31,"column":5}},"loc":{"start":{"line":31,"column":20},"end":{"line":35,"column":5}},"line":31},"13":{"name":"(anonymous_13)","decl":{"start":{"line":32,"column":47},"end":{"line":32,"column":48}},"loc":{"start":{"line":32,"column":60},"end":{"line":34,"column":9}},"line":32},"14":{"name":"(anonymous_14)","decl":{"start":{"line":36,"column":4},"end":{"line":36,"column":5}},"loc":{"start":{"line":36,"column":24},"end":{"line":40,"column":5}},"line":36},"15":{"name":"(anonymous_15)","decl":{"start":{"line":37,"column":47},"end":{"line":37,"column":48}},"loc":{"start":{"line":37,"column":60},"end":{"line":39,"column":9}},"line":37},"16":{"name":"(anonymous_16)","decl":{"start":{"line":41,"column":4},"end":{"line":41,"column":5}},"loc":{"start":{"line":41,"column":24},"end":{"line":45,"column":5}},"line":41},"17":{"name":"(anonymous_17)","decl":{"start":{"line":42,"column":47},"end":{"line":42,"column":48}},"loc":{"start":{"line":42,"column":60},"end":{"line":44,"column":9}},"line":42},"18":{"name":"(anonymous_18)","decl":{"start":{"line":46,"column":4},"end":{"line":46,"column":5}},"loc":{"start":{"line":46,"column":15},"end":{"line":50,"column":5}},"line":46},"19":{"name":"(anonymous_19)","decl":{"start":{"line":47,"column":47},"end":{"line":47,"column":48}},"loc":{"start":{"line":47,"column":60},"end":{"line":49,"column":9}},"line":47}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":14,"column":16},"end":{"line":14,"column":52}},"type":"default-arg","locations":[{"start":{"line":14,"column":25},"end":{"line":14,"column":52}}],"line":14}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":2,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":2,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0]},"inputSourceMap":{"version":3,"file":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/category/repository.ts","sources":["/home/luck/projetos/portfolio/e-commerce/packages/server/src/category/repository.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,2CAA8C;AAO9C,MAAqB,kBAAkB;IAGrC,YAAY,MAAM,GAAG,IAAI,qBAAY,EAAE;QACrC,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;IACxB,CAAC;IAEY,MAAM;;YACjB,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC;gBACpC,OAAO,EAAE;oBACP,aAAa,EAAE,IAAI;iBACpB;aACF,CAAC,CAAC;QACL,CAAC;KAAA;IAEY,OAAO,CAAC,EAAU;;YAC7B,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;QAC7D,CAAC;KAAA;IAEY,SAAS,CAAC,IAAY;;YACjC,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,EAAE,KAAK,EAAE,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;QAC/D,CAAC;KAAA;IAEY,MAAM,CAAC,WAAmC;;YACrD,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,WAAW,EAAE,CAAC,CAAC;QAC7D,CAAC;KAAA;IAEY,MAAM,CACjB,EAAU,EACV,OAA+B;;YAE/B,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC;QACxE,CAAC;KAAA;IAEY,MAAM,CAAC,EAAU;;YAC5B,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;QACzD,CAAC;KAAA;CACF;AArCD,qCAqCC","sourcesContent":["import { PrismaClient } from \"@prisma/client\";\nimport {\n  ICategory,\n  ICategoryCreateRequest,\n  ICategoryUpdateRequest,\n} from \"../interfaces/ICategory\";\n\nexport default class CategoryRepository {\n  private _prisma: PrismaClient;\n\n  constructor(prisma = new PrismaClient()) {\n    this._prisma = prisma;\n  }\n\n  public async getAll(): Promise<ICategory[]> {\n    return this._prisma.category.findMany({\n      include: {\n        subCategories: true,\n      },\n    });\n  }\n\n  public async getById(id: number): Promise<ICategory | null> {\n    return this._prisma.category.findUnique({ where: { id } });\n  }\n\n  public async getByName(name: string): Promise<ICategory | null> {\n    return this._prisma.category.findUnique({ where: { name } });\n  }\n\n  public async create(newCategory: ICategoryCreateRequest): Promise<ICategory> {\n    return this._prisma.category.create({ data: newCategory });\n  }\n\n  public async update(\n    id: number,\n    payload: ICategoryUpdateRequest\n  ): Promise<ICategory> {\n    return this._prisma.category.update({ where: { id }, data: payload });\n  }\n\n  public async delete(id: number): Promise<ICategory> {\n    return this._prisma.category.delete({ where: { id } });\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b08b4e91cc78acfc73f2c22b5905617ccb0e14c3","contentHash":"09ef24955164dffc0b26dcb535277993508e8f9b537dea05e3003159d1e59c64"},"/home/luck/projetos/portfolio/e-commerce/packages/server/src/category/service.ts":{"path":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/category/service.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":19},"end":{"line":15,"column":54}},"16":{"start":{"line":16,"column":19},"end":{"line":16,"column":54}},"17":{"start":{"line":17,"column":21},"end":{"line":17,"column":61}},"18":{"start":{"line":20,"column":8},"end":{"line":20,"column":38}},"19":{"start":{"line":23,"column":8},"end":{"line":25,"column":11}},"20":{"start":{"line":24,"column":12},"end":{"line":24,"column":45}},"21":{"start":{"line":28,"column":8},"end":{"line":33,"column":11}},"22":{"start":{"line":29,"column":29},"end":{"line":29,"column":63}},"23":{"start":{"line":30,"column":12},"end":{"line":31,"column":68}},"24":{"start":{"line":31,"column":16},"end":{"line":31,"column":68}},"25":{"start":{"line":32,"column":12},"end":{"line":32,"column":28}},"26":{"start":{"line":36,"column":8},"end":{"line":41,"column":11}},"27":{"start":{"line":37,"column":35},"end":{"line":37,"column":85}},"28":{"start":{"line":38,"column":12},"end":{"line":39,"column":73}},"29":{"start":{"line":39,"column":16},"end":{"line":39,"column":73}},"30":{"start":{"line":40,"column":12},"end":{"line":40,"column":56}},"31":{"start":{"line":44,"column":8},"end":{"line":49,"column":11}},"32":{"start":{"line":45,"column":29},"end":{"line":45,"column":63}},"33":{"start":{"line":46,"column":12},"end":{"line":47,"column":68}},"34":{"start":{"line":47,"column":16},"end":{"line":47,"column":68}},"35":{"start":{"line":48,"column":12},"end":{"line":48,"column":56}},"36":{"start":{"line":52,"column":8},"end":{"line":57,"column":11}},"37":{"start":{"line":53,"column":29},"end":{"line":53,"column":63}},"38":{"start":{"line":54,"column":12},"end":{"line":55,"column":68}},"39":{"start":{"line":55,"column":16},"end":{"line":55,"column":68}},"40":{"start":{"line":56,"column":12},"end":{"line":56,"column":47}},"41":{"start":{"line":60,"column":0},"end":{"line":60,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":19,"column":4},"end":{"line":19,"column":5}},"loc":{"start":{"line":19,"column":57},"end":{"line":21,"column":5}},"line":19},"9":{"name":"(anonymous_9)","decl":{"start":{"line":22,"column":4},"end":{"line":22,"column":5}},"loc":{"start":{"line":22,"column":13},"end":{"line":26,"column":5}},"line":22},"10":{"name":"(anonymous_10)","decl":{"start":{"line":23,"column":47},"end":{"line":23,"column":48}},"loc":{"start":{"line":23,"column":60},"end":{"line":25,"column":9}},"line":23},"11":{"name":"(anonymous_11)","decl":{"start":{"line":27,"column":4},"end":{"line":27,"column":5}},"loc":{"start":{"line":27,"column":16},"end":{"line":34,"column":5}},"line":27},"12":{"name":"(anonymous_12)","decl":{"start":{"line":28,"column":47},"end":{"line":28,"column":48}},"loc":{"start":{"line":28,"column":60},"end":{"line":33,"column":9}},"line":28},"13":{"name":"(anonymous_13)","decl":{"start":{"line":35,"column":4},"end":{"line":35,"column":5}},"loc":{"start":{"line":35,"column":24},"end":{"line":42,"column":5}},"line":35},"14":{"name":"(anonymous_14)","decl":{"start":{"line":36,"column":47},"end":{"line":36,"column":48}},"loc":{"start":{"line":36,"column":60},"end":{"line":41,"column":9}},"line":36},"15":{"name":"(anonymous_15)","decl":{"start":{"line":43,"column":4},"end":{"line":43,"column":5}},"loc":{"start":{"line":43,"column":24},"end":{"line":50,"column":5}},"line":43},"16":{"name":"(anonymous_16)","decl":{"start":{"line":44,"column":47},"end":{"line":44,"column":48}},"loc":{"start":{"line":44,"column":60},"end":{"line":49,"column":9}},"line":44},"17":{"name":"(anonymous_17)","decl":{"start":{"line":51,"column":4},"end":{"line":51,"column":5}},"loc":{"start":{"line":51,"column":15},"end":{"line":58,"column":5}},"line":51},"18":{"name":"(anonymous_18)","decl":{"start":{"line":52,"column":47},"end":{"line":52,"column":48}},"loc":{"start":{"line":52,"column":60},"end":{"line":57,"column":9}},"line":52}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":19,"column":16},"end":{"line":19,"column":55}},"type":"default-arg","locations":[{"start":{"line":19,"column":29},"end":{"line":19,"column":55}}],"line":19},"9":{"loc":{"start":{"line":30,"column":12},"end":{"line":31,"column":68}},"type":"if","locations":[{"start":{"line":30,"column":12},"end":{"line":31,"column":68}},{"start":{"line":30,"column":12},"end":{"line":31,"column":68}}],"line":30},"10":{"loc":{"start":{"line":38,"column":12},"end":{"line":39,"column":73}},"type":"if","locations":[{"start":{"line":38,"column":12},"end":{"line":39,"column":73}},{"start":{"line":38,"column":12},"end":{"line":39,"column":73}}],"line":38},"11":{"loc":{"start":{"line":46,"column":12},"end":{"line":47,"column":68}},"type":"if","locations":[{"start":{"line":46,"column":12},"end":{"line":47,"column":68}},{"start":{"line":46,"column":12},"end":{"line":47,"column":68}}],"line":46},"12":{"loc":{"start":{"line":54,"column":12},"end":{"line":55,"column":68}},"type":"if","locations":[{"start":{"line":54,"column":12},"end":{"line":55,"column":68}},{"start":{"line":54,"column":12},"end":{"line":55,"column":68}}],"line":54}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[1,0],"7":[1,1],"8":[0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0]},"inputSourceMap":{"version":3,"file":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/category/service.ts","sources":["/home/luck/projetos/portfolio/e-commerce/packages/server/src/category/service.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AACA,uDAAoD;AACpD,uDAAoD;AACpD,8DAA8C;AAE9C,MAAqB,eAAe;IAGlC,YAAY,UAAU,GAAG,IAAI,oBAAkB,EAAE;QAC/C,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;IAChC,CAAC;IAEY,MAAM;;YACjB,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC;QACnC,CAAC;KAAA;IAEY,OAAO,CAAC,EAAU;;YAC7B,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;YAEpD,IAAI,CAAC,QAAQ;gBAAE,MAAM,IAAI,mBAAQ,CAAC,oBAAoB,CAAC,CAAC;YAExD,OAAO,QAAQ,CAAC;QAClB,CAAC;KAAA;IAEY,MAAM,CAAC,WAAmC;;YACrD,MAAM,cAAc,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;YAE1E,IAAI,cAAc;gBAAE,MAAM,IAAI,mBAAQ,CAAC,yBAAyB,CAAC,CAAC;YAElE,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;QAC9C,CAAC;KAAA;IAEY,MAAM,CAAC,EAAU,EAAE,OAA+B;;YAC7D,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;YAEpD,IAAI,CAAC,QAAQ;gBAAE,MAAM,IAAI,mBAAQ,CAAC,oBAAoB,CAAC,CAAC;YAExD,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;QAC9C,CAAC;KAAA;IAEY,MAAM,CAAC,EAAU;;YAC5B,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;YAEpD,IAAI,CAAC,QAAQ;gBAAE,MAAM,IAAI,mBAAQ,CAAC,oBAAoB,CAAC,CAAC;YAExD,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;QACrC,CAAC;KAAA;CACF;AA1CD,kCA0CC","sourcesContent":["import { ICategory, ICategoryCreateRequest, ICategoryUpdateRequest } from \"../interfaces/ICategory\";\nimport { Conflict } from \"../utils/errors/Conflict\";\nimport { NotFound } from \"../utils/errors/NotFound\";\nimport CategoryRepository from \"./repository\";\n\nexport default class CategoryService {\n  private _repository: CategoryRepository;\n\n  constructor(repository = new CategoryRepository()) {\n    this._repository = repository;\n  }\n\n  public async getAll(): Promise<ICategory[]> {\n    return this._repository.getAll();\n  }\n\n  public async getById(id: number): Promise<ICategory> {\n    const category = await this._repository.getById(id);\n\n    if (!category) throw new NotFound(\"category not found\");\n\n    return category;\n  }\n\n  public async create(newCategory: ICategoryCreateRequest): Promise<ICategory> {\n    const categoryExists = await this._repository.getByName(newCategory.name);\n\n    if (categoryExists) throw new Conflict(\"category already exists\");\n\n    return this._repository.create(newCategory);\n  }\n\n  public async update(id: number, payload: ICategoryUpdateRequest): Promise<ICategory> {\n    const category = await this._repository.getById(id);\n\n    if (!category) throw new NotFound(\"category not found\");\n\n    return this._repository.update(id, payload);\n  }\n\n  public async delete(id: number): Promise<ICategory> {\n    const category = await this._repository.getById(id);\n\n    if (!category) throw new NotFound(\"category not found\");\n\n    return this._repository.delete(id);\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"748bb611383c5b0da6d24770df53ecae0bef966c","contentHash":"0d079c934a0490e0fa07ec1f37935ba26e683bce7743d5f59e05cf5fbffcb758"},"/home/luck/projetos/portfolio/e-commerce/packages/server/src/category/controller.ts":{"path":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/category/controller.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":21},"end":{"line":15,"column":58}},"16":{"start":{"line":16,"column":17},"end":{"line":16,"column":60}},"17":{"start":{"line":17,"column":18},"end":{"line":17,"column":55}},"18":{"start":{"line":20,"column":8},"end":{"line":30,"column":11}},"19":{"start":{"line":20,"column":43},"end":{"line":30,"column":10}},"20":{"start":{"line":21,"column":12},"end":{"line":29,"column":13}},"21":{"start":{"line":22,"column":36},"end":{"line":22,"column":64}},"22":{"start":{"line":23,"column":16},"end":{"line":23,"column":50}},"23":{"start":{"line":24,"column":16},"end":{"line":24,"column":67}},"24":{"start":{"line":27,"column":16},"end":{"line":27,"column":64}},"25":{"start":{"line":28,"column":16},"end":{"line":28,"column":28}},"26":{"start":{"line":31,"column":8},"end":{"line":44,"column":11}},"27":{"start":{"line":31,"column":43},"end":{"line":44,"column":10}},"28":{"start":{"line":32,"column":23},"end":{"line":32,"column":50}},"29":{"start":{"line":33,"column":12},"end":{"line":34,"column":71}},"30":{"start":{"line":34,"column":16},"end":{"line":34,"column":71}},"31":{"start":{"line":35,"column":12},"end":{"line":43,"column":13}},"32":{"start":{"line":36,"column":29},"end":{"line":36,"column":60}},"33":{"start":{"line":37,"column":16},"end":{"line":37,"column":43}},"34":{"start":{"line":38,"column":16},"end":{"line":38,"column":68}},"35":{"start":{"line":41,"column":16},"end":{"line":41,"column":65}},"36":{"start":{"line":42,"column":16},"end":{"line":42,"column":28}},"37":{"start":{"line":45,"column":8},"end":{"line":59,"column":11}},"38":{"start":{"line":45,"column":42},"end":{"line":59,"column":10}},"39":{"start":{"line":46,"column":39},"end":{"line":46,"column":47}},"40":{"start":{"line":47,"column":12},"end":{"line":58,"column":13}},"41":{"start":{"line":48,"column":36},"end":{"line":51,"column":18}},"42":{"start":{"line":52,"column":16},"end":{"line":52,"column":50}},"43":{"start":{"line":53,"column":16},"end":{"line":53,"column":67}},"44":{"start":{"line":56,"column":16},"end":{"line":56,"column":64}},"45":{"start":{"line":57,"column":16},"end":{"line":57,"column":28}},"46":{"start":{"line":60,"column":8},"end":{"line":77,"column":11}},"47":{"start":{"line":60,"column":42},"end":{"line":77,"column":10}},"48":{"start":{"line":61,"column":23},"end":{"line":61,"column":50}},"49":{"start":{"line":62,"column":12},"end":{"line":63,"column":71}},"50":{"start":{"line":63,"column":16},"end":{"line":63,"column":71}},"51":{"start":{"line":64,"column":39},"end":{"line":64,"column":47}},"52":{"start":{"line":65,"column":12},"end":{"line":76,"column":13}},"53":{"start":{"line":66,"column":39},"end":{"line":69,"column":18}},"54":{"start":{"line":70,"column":16},"end":{"line":70,"column":53}},"55":{"start":{"line":71,"column":16},"end":{"line":71,"column":67}},"56":{"start":{"line":74,"column":16},"end":{"line":74,"column":64}},"57":{"start":{"line":75,"column":16},"end":{"line":75,"column":28}},"58":{"start":{"line":78,"column":8},"end":{"line":91,"column":11}},"59":{"start":{"line":78,"column":42},"end":{"line":91,"column":10}},"60":{"start":{"line":79,"column":23},"end":{"line":79,"column":50}},"61":{"start":{"line":80,"column":12},"end":{"line":81,"column":71}},"62":{"start":{"line":81,"column":16},"end":{"line":81,"column":71}},"63":{"start":{"line":82,"column":12},"end":{"line":90,"column":13}},"64":{"start":{"line":83,"column":16},"end":{"line":83,"column":47}},"65":{"start":{"line":84,"column":16},"end":{"line":84,"column":38}},"66":{"start":{"line":85,"column":16},"end":{"line":85,"column":67}},"67":{"start":{"line":88,"column":16},"end":{"line":88,"column":64}},"68":{"start":{"line":89,"column":16},"end":{"line":89,"column":28}},"69":{"start":{"line":92,"column":8},"end":{"line":92,"column":32}},"70":{"start":{"line":95,"column":0},"end":{"line":95,"column":37}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":19,"column":4},"end":{"line":19,"column":5}},"loc":{"start":{"line":19,"column":51},"end":{"line":93,"column":5}},"line":19},"9":{"name":"(anonymous_9)","decl":{"start":{"line":20,"column":22},"end":{"line":20,"column":23}},"loc":{"start":{"line":20,"column":43},"end":{"line":30,"column":10}},"line":20},"10":{"name":"(anonymous_10)","decl":{"start":{"line":20,"column":75},"end":{"line":20,"column":76}},"loc":{"start":{"line":20,"column":88},"end":{"line":30,"column":9}},"line":20},"11":{"name":"(anonymous_11)","decl":{"start":{"line":31,"column":23},"end":{"line":31,"column":24}},"loc":{"start":{"line":31,"column":43},"end":{"line":44,"column":10}},"line":31},"12":{"name":"(anonymous_12)","decl":{"start":{"line":31,"column":75},"end":{"line":31,"column":76}},"loc":{"start":{"line":31,"column":88},"end":{"line":44,"column":9}},"line":31},"13":{"name":"(anonymous_13)","decl":{"start":{"line":45,"column":22},"end":{"line":45,"column":23}},"loc":{"start":{"line":45,"column":42},"end":{"line":59,"column":10}},"line":45},"14":{"name":"(anonymous_14)","decl":{"start":{"line":45,"column":74},"end":{"line":45,"column":75}},"loc":{"start":{"line":45,"column":87},"end":{"line":59,"column":9}},"line":45},"15":{"name":"(anonymous_15)","decl":{"start":{"line":60,"column":22},"end":{"line":60,"column":23}},"loc":{"start":{"line":60,"column":42},"end":{"line":77,"column":10}},"line":60},"16":{"name":"(anonymous_16)","decl":{"start":{"line":60,"column":74},"end":{"line":60,"column":75}},"loc":{"start":{"line":60,"column":87},"end":{"line":77,"column":9}},"line":60},"17":{"name":"(anonymous_17)","decl":{"start":{"line":78,"column":22},"end":{"line":78,"column":23}},"loc":{"start":{"line":78,"column":42},"end":{"line":91,"column":10}},"line":78},"18":{"name":"(anonymous_18)","decl":{"start":{"line":78,"column":74},"end":{"line":78,"column":75}},"loc":{"start":{"line":78,"column":87},"end":{"line":91,"column":9}},"line":78}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":19,"column":16},"end":{"line":19,"column":49}},"type":"default-arg","locations":[{"start":{"line":19,"column":26},"end":{"line":19,"column":49}}],"line":19},"9":{"loc":{"start":{"line":33,"column":12},"end":{"line":34,"column":71}},"type":"if","locations":[{"start":{"line":33,"column":12},"end":{"line":34,"column":71}},{"start":{"line":33,"column":12},"end":{"line":34,"column":71}}],"line":33},"10":{"loc":{"start":{"line":62,"column":12},"end":{"line":63,"column":71}},"type":"if","locations":[{"start":{"line":62,"column":12},"end":{"line":63,"column":71}},{"start":{"line":62,"column":12},"end":{"line":63,"column":71}}],"line":62},"11":{"loc":{"start":{"line":80,"column":12},"end":{"line":81,"column":71}},"type":"if","locations":[{"start":{"line":80,"column":12},"end":{"line":81,"column":71}},{"start":{"line":80,"column":12},"end":{"line":81,"column":71}}],"line":80}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":1,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":1,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":1,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":1,"70":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":2,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[2,0],"7":[2,2],"8":[0],"9":[0,0],"10":[0,0],"11":[0,0]},"inputSourceMap":{"version":3,"file":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/category/controller.ts","sources":["/home/luck/projetos/portfolio/e-commerce/packages/server/src/category/controller.ts"],"names":[],"mappings":"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","sourcesContent":["import { RequestHandler } from \"express\";\nimport { BadRequest } from \"../utils/errors/BadRequest\";\nimport Logger from \"../utils/logger\";\nimport CategoryService from \"./service\";\nimport {\n  ICategoryCreateRequest,\n  ICategoryUpdateRequest,\n} from \"../interfaces/ICategory\";\n\nexport default class CategoryController {\n  private _service: CategoryService;\n\n  constructor(service = new CategoryService()) {\n    this._service = service;\n  }\n\n  public getAll: RequestHandler = async (_req, res, next) => {\n    try {\n      const AllCategory = await this._service.getAll();\n\n      res.status(200).json(AllCategory);\n\n      Logger.save(\"category getAll() success\");\n    } catch (error) {\n      Logger.save(\"category getAll() fail\");\n\n      next(error);\n    }\n  };\n\n  public getById: RequestHandler = async (req, res, next) => {\n    const id = parseInt(req.params.id, 10);\n\n    if (isNaN(id)) return next(new BadRequest(\"invalid id\"));\n\n    try {\n      const user = await this._service.getById(id);\n\n      res.status(200).json(user);\n\n      Logger.save(\"category getById() success\");\n    } catch (error) {\n      Logger.save(\"category getById() fail\");\n\n      next(error);\n    }\n  };\n\n  public create: RequestHandler = async (req, res, next) => {\n    const { name, parentId } = req.body as ICategoryCreateRequest;\n\n    try {\n      const newCategory = await this._service.create({\n        name,\n        parentId,\n      });\n\n      res.status(201).json(newCategory);\n\n      Logger.save(\"category create() success\");\n    } catch (error) {\n      Logger.save(\"category create() fail\");\n\n      next(error);\n    }\n  };\n\n  public update: RequestHandler = async (req, res, next) => {\n    const id = parseInt(req.params.id, 10);\n\n    if (isNaN(id)) return next(new BadRequest(\"invalid id\"));\n\n    const { name, parentId } = req.body as ICategoryUpdateRequest;\n\n    try {\n      const updateCategory = await this._service.update(id, {\n        name,\n        parentId,\n      });\n\n      res.status(200).json(updateCategory);\n\n      Logger.save(\"category update() success\");\n    } catch (error) {\n      Logger.save(\"category update() fail\");\n\n      next(error);\n    }\n  };\n\n  public delete: RequestHandler = async (req, res, next) => {\n    const id = parseInt(req.params.id, 10);\n\n    if (isNaN(id)) return next(new BadRequest(\"invalid id\"));\n\n    try {\n      await this._service.delete(id);\n\n      res.status(204).end();\n\n      Logger.save(\"category delete() success\");\n    } catch (error) {\n      Logger.save(\"category delete() fail\");\n\n      next(error);\n    }\n  };\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"bcbc63b98eccba4981a7eb46d1e686cf730fb5b9","contentHash":"007ffa698f62bd1686ecc2010a7b454b6a5079675b24e18ba821ca46b58576f6"},"/home/luck/projetos/portfolio/e-commerce/packages/server/src/category/router.ts":{"path":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/category/router.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":36}},"4":{"start":{"line":7,"column":19},"end":{"line":7,"column":70}},"5":{"start":{"line":8,"column":21},"end":{"line":8,"column":61}},"6":{"start":{"line":9,"column":15},"end":{"line":9,"column":62}},"7":{"start":{"line":12,"column":8},"end":{"line":12,"column":30}},"8":{"start":{"line":13,"column":8},"end":{"line":13,"column":38}},"9":{"start":{"line":14,"column":8},"end":{"line":14,"column":55}},"10":{"start":{"line":15,"column":8},"end":{"line":15,"column":59}},"11":{"start":{"line":16,"column":8},"end":{"line":16,"column":45}},"12":{"start":{"line":17,"column":8},"end":{"line":17,"column":93}},"13":{"start":{"line":18,"column":8},"end":{"line":18,"column":95}},"14":{"start":{"line":19,"column":8},"end":{"line":19,"column":61}},"15":{"start":{"line":22,"column":8},"end":{"line":22,"column":28}},"16":{"start":{"line":25,"column":0},"end":{"line":25,"column":33}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":4},"end":{"line":11,"column":5}},"loc":{"start":{"line":11,"column":91},"end":{"line":20,"column":5}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":21,"column":4},"end":{"line":21,"column":5}},"loc":{"start":{"line":21,"column":17},"end":{"line":23,"column":5}},"line":21}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":11,"column":16},"end":{"line":11,"column":48}},"type":"default-arg","locations":[{"start":{"line":11,"column":25},"end":{"line":11,"column":48}}],"line":11},"4":{"loc":{"start":{"line":11,"column":50},"end":{"line":11,"column":89}},"type":"default-arg","locations":[{"start":{"line":11,"column":63},"end":{"line":11,"column":89}}],"line":11}},"s":{"0":1,"1":3,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1},"f":{"0":3,"1":1,"2":1},"b":{"0":[1,1,1],"1":[3,0],"2":[3,3],"3":[0],"4":[0]},"inputSourceMap":{"version":3,"file":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/category/router.ts","sources":["/home/luck/projetos/portfolio/e-commerce/packages/server/src/category/router.ts"],"names":[],"mappings":";;;;;AAAA,qCAAiC;AACjC,uEAAkD;AAClD,8DAA8C;AAC9C,+DAAiD;AAEjD,MAAqB,cAAc;IAKjC,YAAY,MAAM,GAAG,IAAA,gBAAM,GAAE,EAAE,UAAU,GAAG,IAAI,oBAAkB,EAAE;QAClE,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;QACtB,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;QAE9B,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;QAC/C,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;QACnD,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;QACrC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,EAAE,kBAAW,CAAC,gBAAgB,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;QAC9E,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,kBAAW,CAAC,gBAAgB,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;QAChF,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;IACvD,CAAC;IAED,IAAI,MAAM;QACR,OAAO,IAAI,CAAC,OAAO,CAAC;IACtB,CAAC;CACF;AApBD,iCAoBC","sourcesContent":["import { Router } from 'express';\nimport Middlewares from '../middlewares/Category';\nimport CategoryController from './controller';\nimport AuthMiddleware from '../middlewares/Auth';\n\nexport default class CategoryRouter {\n  private _router: Router;\n\n  private _controller: CategoryController;\n\n  constructor(router = Router(), controller = new CategoryController()) {\n    this._router = router;\n    this._controller = controller;\n\n    this._router.get('/', this._controller.getAll);\n    this._router.get('/:id', this._controller.getById);\n    this._router.use(AuthMiddleware.Jwt);\n    this._router.post('/', Middlewares.createValidation, this._controller.create);\n    this._router.put('/:id', Middlewares.updateValidation, this._controller.update);\n    this._router.delete('/:id', this._controller.delete);\n  }\n\n  get router() {\n    return this._router;\n  }\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"56025d19c7c33082950af2f953677dc9e7c87eb0","contentHash":"7714d6f765db29fcd71908d22c00bf2ca5b7549e9fc1bf1c5e36bcf05bc10850"},"/home/luck/projetos/portfolio/e-commerce/packages/server/src/middlewares/Category.ts":{"path":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/middlewares/Category.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":14},"end":{"line":6,"column":45}},"4":{"start":{"line":7,"column":21},"end":{"line":7,"column":58}},"5":{"start":{"line":8,"column":21},"end":{"line":8,"column":44}},"6":{"start":{"line":11,"column":0},"end":{"line":14,"column":3}},"7":{"start":{"line":15,"column":0},"end":{"line":18,"column":3}},"8":{"start":{"line":19,"column":0},"end":{"line":28,"column":2}},"9":{"start":{"line":20,"column":31},"end":{"line":20,"column":39}},"10":{"start":{"line":21,"column":22},"end":{"line":24,"column":6}},"11":{"start":{"line":25,"column":4},"end":{"line":26,"column":64}},"12":{"start":{"line":26,"column":8},"end":{"line":26,"column":64}},"13":{"start":{"line":27,"column":4},"end":{"line":27,"column":11}},"14":{"start":{"line":29,"column":0},"end":{"line":38,"column":2}},"15":{"start":{"line":30,"column":31},"end":{"line":30,"column":39}},"16":{"start":{"line":31,"column":22},"end":{"line":34,"column":6}},"17":{"start":{"line":35,"column":4},"end":{"line":36,"column":64}},"18":{"start":{"line":36,"column":8},"end":{"line":36,"column":64}},"19":{"start":{"line":37,"column":4},"end":{"line":37,"column":11}},"20":{"start":{"line":39,"column":0},"end":{"line":39,"column":38}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":19,"column":39},"end":{"line":19,"column":40}},"loc":{"start":{"line":19,"column":60},"end":{"line":28,"column":1}},"line":19},"2":{"name":"(anonymous_2)","decl":{"start":{"line":29,"column":39},"end":{"line":29,"column":40}},"loc":{"start":{"line":29,"column":60},"end":{"line":38,"column":1}},"line":29}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":25,"column":4},"end":{"line":26,"column":64}},"type":"if","locations":[{"start":{"line":25,"column":4},"end":{"line":26,"column":64}},{"start":{"line":25,"column":4},"end":{"line":26,"column":64}}],"line":25},"4":{"loc":{"start":{"line":35,"column":4},"end":{"line":36,"column":64}},"type":"if","locations":[{"start":{"line":35,"column":4},"end":{"line":36,"column":64}},{"start":{"line":35,"column":4},"end":{"line":36,"column":64}}],"line":35}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":1,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1},"f":{"0":1,"1":0,"2":0},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[0,0],"4":[0,0]},"inputSourceMap":{"version":3,"file":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/middlewares/Category.ts","sources":["/home/luck/projetos/portfolio/e-commerce/packages/server/src/middlewares/Category.ts"],"names":[],"mappings":";;;;;AACA,8CAAsB;AACtB,2DAAwD;AAExD,6CAA0C;AAE1C,MAAqB,mBAAoB,SAAQ,uBAAU;;AAC1C,iCAAa,GAAG,aAAG,CAAC,MAAM,CAAC;IACxC,IAAI,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE;IAC7B,QAAQ,EAAE,aAAG,CAAC,MAAM,EAAE;CACvB,CAAC,CAAC;AAEY,iCAAa,GAAG,aAAG,CAAC,MAAM,CAAC;IACxC,IAAI,EAAE,aAAG,CAAC,MAAM,EAAE;IAClB,QAAQ,EAAE,aAAG,CAAC,MAAM,EAAE;CACvB,CAAC,CAAC;AAEW,oCAAgB,GAAmB,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE;IACnE,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,GAAG,CAAC,IAA8B,CAAC;IAC9D,MAAM,EAAE,KAAK,EAAE,GAAG,mBAAmB,CAAC,aAAa,CAAC,QAAQ,CAAC;QAC3D,IAAI;QACJ,QAAQ;KACT,CAAC,CAAC;IAEH,IAAI,KAAK;QAAE,OAAO,IAAI,CAAC,IAAI,uBAAU,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;IAEtD,IAAI,EAAE,CAAC;AACT,CAAC,CAAC;AAEY,oCAAgB,GAAmB,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE;IACnE,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,GAAG,CAAC,IAA8B,CAAC;IAC9D,MAAM,EAAE,KAAK,EAAE,GAAG,mBAAmB,CAAC,aAAa,CAAC,QAAQ,CAAC;QAC3D,IAAI;QACJ,QAAQ;KACT,CAAC,CAAC;IAEH,IAAI,KAAK;QAAE,OAAO,IAAI,CAAC,IAAI,uBAAU,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;IAEtD,IAAI,EAAE,CAAC;AACT,CAAC,CAAC;kBAjCiB,mBAAmB","sourcesContent":["import { RequestHandler } from \"express\";\nimport joi from \"joi\";\nimport { BadRequest } from \"../utils/errors/BadRequest\";\nimport { ICategoryCreateRequest, ICategoryUpdateRequest } from \"../interfaces/ICategory\";\nimport { Middleware } from \"./Middleware\";\n\nexport default class CategoryMiddlewares extends Middleware {\n  private static _createSchema = joi.object({\n    name: joi.string().required(),\n    parentId: joi.number(),\n  });\n\n  private static _updateSchema = joi.object({\n    name: joi.string(),\n    parentId: joi.number(),\n  });\n\n  public static createValidation: RequestHandler = (req, _res, next) => {\n    const { name, parentId } = req.body as ICategoryCreateRequest;\n    const { error } = CategoryMiddlewares._createSchema.validate({\n      name,\n      parentId,\n    });\n\n    if (error) return next(new BadRequest(error.message));\n\n    next();\n  };\n\n  public static updateValidation: RequestHandler = (req, _res, next) => {\n    const { name, parentId } = req.body as ICategoryUpdateRequest;\n    const { error } = CategoryMiddlewares._updateSchema.validate({\n      name,\n      parentId,\n    });\n\n    if (error) return next(new BadRequest(error.message));\n\n    next();\n  };\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"64cf7c8e8c2d48d3d43a580dbd09dba5ac64a227","contentHash":"1e76de067f845a0e2702fff90888fa606bcca00e9f4089b20f35b1965f3d22c7"},"/home/luck/projetos/portfolio/e-commerce/packages/server/src/product/repository.ts":{"path":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/product/repository.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":0},"end":{"line":11,"column":62}},"13":{"start":{"line":12,"column":17},"end":{"line":12,"column":42}},"14":{"start":{"line":15,"column":8},"end":{"line":15,"column":30}},"15":{"start":{"line":18,"column":8},"end":{"line":20,"column":11}},"16":{"start":{"line":19,"column":12},"end":{"line":19,"column":84}},"17":{"start":{"line":23,"column":8},"end":{"line":28,"column":11}},"18":{"start":{"line":24,"column":12},"end":{"line":27,"column":15}},"19":{"start":{"line":31,"column":8},"end":{"line":37,"column":11}},"20":{"start":{"line":32,"column":12},"end":{"line":36,"column":15}},"21":{"start":{"line":34,"column":76},"end":{"line":34,"column":94}},"22":{"start":{"line":41,"column":8},"end":{"line":45,"column":11}},"23":{"start":{"line":42,"column":12},"end":{"line":44,"column":28}},"24":{"start":{"line":43,"column":120},"end":{"line":43,"column":138}},"25":{"start":{"line":48,"column":8},"end":{"line":50,"column":11}},"26":{"start":{"line":49,"column":12},"end":{"line":49,"column":66}},"27":{"start":{"line":53,"column":0},"end":{"line":53,"column":36}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":14,"column":4},"end":{"line":14,"column":5}},"loc":{"start":{"line":14,"column":54},"end":{"line":16,"column":5}},"line":14},"8":{"name":"(anonymous_8)","decl":{"start":{"line":17,"column":4},"end":{"line":17,"column":5}},"loc":{"start":{"line":17,"column":13},"end":{"line":21,"column":5}},"line":17},"9":{"name":"(anonymous_9)","decl":{"start":{"line":18,"column":47},"end":{"line":18,"column":48}},"loc":{"start":{"line":18,"column":60},"end":{"line":20,"column":9}},"line":18},"10":{"name":"(anonymous_10)","decl":{"start":{"line":22,"column":4},"end":{"line":22,"column":5}},"loc":{"start":{"line":22,"column":16},"end":{"line":29,"column":5}},"line":22},"11":{"name":"(anonymous_11)","decl":{"start":{"line":23,"column":47},"end":{"line":23,"column":48}},"loc":{"start":{"line":23,"column":60},"end":{"line":28,"column":9}},"line":23},"12":{"name":"(anonymous_12)","decl":{"start":{"line":30,"column":4},"end":{"line":30,"column":5}},"loc":{"start":{"line":30,"column":23},"end":{"line":38,"column":5}},"line":30},"13":{"name":"(anonymous_13)","decl":{"start":{"line":31,"column":47},"end":{"line":31,"column":48}},"loc":{"start":{"line":31,"column":60},"end":{"line":37,"column":9}},"line":31},"14":{"name":"(anonymous_14)","decl":{"start":{"line":34,"column":59},"end":{"line":34,"column":60}},"loc":{"start":{"line":34,"column":76},"end":{"line":34,"column":94}},"line":34},"15":{"name":"(anonymous_15)","decl":{"start":{"line":39,"column":4},"end":{"line":39,"column":5}},"loc":{"start":{"line":39,"column":24},"end":{"line":46,"column":5}},"line":39},"16":{"name":"(anonymous_16)","decl":{"start":{"line":41,"column":47},"end":{"line":41,"column":48}},"loc":{"start":{"line":41,"column":60},"end":{"line":45,"column":9}},"line":41},"17":{"name":"(anonymous_17)","decl":{"start":{"line":43,"column":103},"end":{"line":43,"column":104}},"loc":{"start":{"line":43,"column":120},"end":{"line":43,"column":138}},"line":43},"18":{"name":"(anonymous_18)","decl":{"start":{"line":47,"column":4},"end":{"line":47,"column":5}},"loc":{"start":{"line":47,"column":15},"end":{"line":51,"column":5}},"line":47},"19":{"name":"(anonymous_19)","decl":{"start":{"line":48,"column":47},"end":{"line":48,"column":48}},"loc":{"start":{"line":48,"column":60},"end":{"line":50,"column":9}},"line":48}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":14,"column":16},"end":{"line":14,"column":52}},"type":"default-arg","locations":[{"start":{"line":14,"column":25},"end":{"line":14,"column":52}}],"line":14},"6":{"loc":{"start":{"line":43,"column":33},"end":{"line":43,"column":140}},"type":"cond-expr","locations":[{"start":{"line":43,"column":87},"end":{"line":43,"column":93}},{"start":{"line":43,"column":96},"end":{"line":43,"column":140}}],"line":43},"7":{"loc":{"start":{"line":43,"column":33},"end":{"line":43,"column":84}},"type":"binary-expr","locations":[{"start":{"line":43,"column":33},"end":{"line":43,"column":67}},{"start":{"line":43,"column":71},"end":{"line":43,"column":84}}],"line":43}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0],"6":[0,0],"7":[0,0]},"inputSourceMap":{"version":3,"file":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/product/repository.ts","sources":["/home/luck/projetos/portfolio/e-commerce/packages/server/src/product/repository.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,2CAA8C;AAO9C,MAAqB,iBAAiB;IAGpC,YAAY,MAAM,GAAG,IAAI,qBAAY,EAAE;QACrC,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;IACxB,CAAC;IAEY,MAAM;;YACjB,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE,OAAO,EAAE,EAAE,UAAU,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;QAC1E,CAAC;KAAA;IAEY,OAAO,CAAC,EAAU;;YAC7B,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC;gBACrC,OAAO,EAAE,EAAE,UAAU,EAAE,IAAI,EAAE;gBAC7B,KAAK,EAAE,EAAE,EAAE,EAAE;aACd,CAAC,CAAC;QACL,CAAC;KAAA;IAEY,MAAM,CAAC,UAAiC;;YACnD,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC;gBACjC,IAAI,kCACC,UAAU,KACb,UAAU,EAAE;wBACV,OAAO,EAAE,UAAU,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,UAAU,EAAE,CAAC,CAAC;qBACzE,GACF;aACF,CAAC,CAAC;QACL,CAAC;KAAA;IAEY,MAAM,CACjB,EAAU,EACV,OAA8B;;;YAE9B,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,EAAE,IAAI,kCACnD,OAAO,KACV,UAAU,EAAE;wBACV,OAAO,EAAE,MAAA,OAAO,CAAC,UAAU,0CAAE,GAAG,CAAC,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,UAAU,EAAE,CAAC,CAAC;qBACvE,GACF,EAAE,CAAC,CAAC;;KACN;IAEY,MAAM,CAAC,EAAU;;YAC5B,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;QACxD,CAAC;KAAA;CACF;AA5CD,oCA4CC","sourcesContent":["import { PrismaClient } from \"@prisma/client\";\nimport {\n  IProduct,\n  IProductCreateRequest,\n  IProductUpdateRequest,\n} from \"../interfaces/IProduct\";\n\nexport default class ProductRepository {\n  private _prisma: PrismaClient;\n\n  constructor(prisma = new PrismaClient()) {\n    this._prisma = prisma;\n  }\n\n  public async getAll(): Promise<IProduct[]> {\n    return this._prisma.product.findMany({ include: { categories: true } });\n  }\n\n  public async getById(id: number): Promise<IProduct | null> {\n    return this._prisma.product.findUnique({\n      include: { categories: true },\n      where: { id },\n    });\n  }\n\n  public async create(newProduct: IProductCreateRequest): Promise<IProduct> {\n    return this._prisma.product.create({\n      data: {\n        ...newProduct,\n        categories: {\n          connect: newProduct.categories.map((categoryId) => ({ id: categoryId })),\n        }\n      },\n    });\n  }\n\n  public async update(\n    id: number,\n    payload: IProductUpdateRequest\n  ): Promise<IProduct> {\n    return this._prisma.product.update({ where: { id }, data: {\n      ...payload,\n      categories: {\n        connect: payload.categories?.map((categoryId) => ({ id: categoryId })),\n      }\n    } });\n  }\n\n  public async delete(id: number): Promise<IProduct> {\n    return this._prisma.product.delete({ where: { id } });\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d46879b5a71adb5fae7c3ec296af9288159caa4f","contentHash":"cf0f099057a45754569fc116e0560bb87344cca640dce56a5102a7551219463a"},"/home/luck/projetos/portfolio/e-commerce/packages/server/src/product/service.ts":{"path":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/product/service.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":21},"end":{"line":15,"column":71}},"16":{"start":{"line":16,"column":19},"end":{"line":16,"column":54}},"17":{"start":{"line":17,"column":21},"end":{"line":17,"column":61}},"18":{"start":{"line":20,"column":8},"end":{"line":20,"column":38}},"19":{"start":{"line":21,"column":8},"end":{"line":21,"column":58}},"20":{"start":{"line":24,"column":8},"end":{"line":26,"column":11}},"21":{"start":{"line":25,"column":12},"end":{"line":25,"column":45}},"22":{"start":{"line":29,"column":8},"end":{"line":34,"column":11}},"23":{"start":{"line":30,"column":28},"end":{"line":30,"column":62}},"24":{"start":{"line":31,"column":12},"end":{"line":32,"column":67}},"25":{"start":{"line":32,"column":16},"end":{"line":32,"column":67}},"26":{"start":{"line":33,"column":12},"end":{"line":33,"column":27}},"27":{"start":{"line":37,"column":8},"end":{"line":47,"column":11}},"28":{"start":{"line":38,"column":12},"end":{"line":45,"column":13}},"29":{"start":{"line":39,"column":16},"end":{"line":44,"column":17}},"30":{"start":{"line":40,"column":37},"end":{"line":40,"column":89}},"31":{"start":{"line":41,"column":20},"end":{"line":43,"column":21}},"32":{"start":{"line":42,"column":24},"end":{"line":42,"column":94}},"33":{"start":{"line":46,"column":12},"end":{"line":46,"column":55}},"34":{"start":{"line":50,"column":8},"end":{"line":60,"column":11}},"35":{"start":{"line":51,"column":12},"end":{"line":58,"column":13}},"36":{"start":{"line":52,"column":16},"end":{"line":57,"column":17}},"37":{"start":{"line":53,"column":37},"end":{"line":53,"column":89}},"38":{"start":{"line":54,"column":20},"end":{"line":56,"column":21}},"39":{"start":{"line":55,"column":24},"end":{"line":55,"column":94}},"40":{"start":{"line":59,"column":12},"end":{"line":59,"column":56}},"41":{"start":{"line":63,"column":8},"end":{"line":68,"column":11}},"42":{"start":{"line":64,"column":28},"end":{"line":64,"column":62}},"43":{"start":{"line":65,"column":12},"end":{"line":66,"column":67}},"44":{"start":{"line":66,"column":16},"end":{"line":66,"column":67}},"45":{"start":{"line":67,"column":12},"end":{"line":67,"column":47}},"46":{"start":{"line":71,"column":0},"end":{"line":71,"column":33}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":19,"column":4},"end":{"line":19,"column":5}},"loc":{"start":{"line":19,"column":108},"end":{"line":22,"column":5}},"line":19},"9":{"name":"(anonymous_9)","decl":{"start":{"line":23,"column":4},"end":{"line":23,"column":5}},"loc":{"start":{"line":23,"column":13},"end":{"line":27,"column":5}},"line":23},"10":{"name":"(anonymous_10)","decl":{"start":{"line":24,"column":47},"end":{"line":24,"column":48}},"loc":{"start":{"line":24,"column":60},"end":{"line":26,"column":9}},"line":24},"11":{"name":"(anonymous_11)","decl":{"start":{"line":28,"column":4},"end":{"line":28,"column":5}},"loc":{"start":{"line":28,"column":16},"end":{"line":35,"column":5}},"line":28},"12":{"name":"(anonymous_12)","decl":{"start":{"line":29,"column":47},"end":{"line":29,"column":48}},"loc":{"start":{"line":29,"column":60},"end":{"line":34,"column":9}},"line":29},"13":{"name":"(anonymous_13)","decl":{"start":{"line":36,"column":4},"end":{"line":36,"column":5}},"loc":{"start":{"line":36,"column":23},"end":{"line":48,"column":5}},"line":36},"14":{"name":"(anonymous_14)","decl":{"start":{"line":37,"column":47},"end":{"line":37,"column":48}},"loc":{"start":{"line":37,"column":60},"end":{"line":47,"column":9}},"line":37},"15":{"name":"(anonymous_15)","decl":{"start":{"line":49,"column":4},"end":{"line":49,"column":5}},"loc":{"start":{"line":49,"column":24},"end":{"line":61,"column":5}},"line":49},"16":{"name":"(anonymous_16)","decl":{"start":{"line":50,"column":47},"end":{"line":50,"column":48}},"loc":{"start":{"line":50,"column":60},"end":{"line":60,"column":9}},"line":50},"17":{"name":"(anonymous_17)","decl":{"start":{"line":62,"column":4},"end":{"line":62,"column":5}},"loc":{"start":{"line":62,"column":15},"end":{"line":69,"column":5}},"line":62},"18":{"name":"(anonymous_18)","decl":{"start":{"line":63,"column":47},"end":{"line":63,"column":48}},"loc":{"start":{"line":63,"column":60},"end":{"line":68,"column":9}},"line":63}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":19,"column":16},"end":{"line":19,"column":55}},"type":"default-arg","locations":[{"start":{"line":19,"column":29},"end":{"line":19,"column":55}}],"line":19},"9":{"loc":{"start":{"line":19,"column":57},"end":{"line":19,"column":106}},"type":"default-arg","locations":[{"start":{"line":19,"column":80},"end":{"line":19,"column":106}}],"line":19},"10":{"loc":{"start":{"line":31,"column":12},"end":{"line":32,"column":67}},"type":"if","locations":[{"start":{"line":31,"column":12},"end":{"line":32,"column":67}},{"start":{"line":31,"column":12},"end":{"line":32,"column":67}}],"line":31},"11":{"loc":{"start":{"line":38,"column":12},"end":{"line":45,"column":13}},"type":"if","locations":[{"start":{"line":38,"column":12},"end":{"line":45,"column":13}},{"start":{"line":38,"column":12},"end":{"line":45,"column":13}}],"line":38},"12":{"loc":{"start":{"line":41,"column":20},"end":{"line":43,"column":21}},"type":"if","locations":[{"start":{"line":41,"column":20},"end":{"line":43,"column":21}},{"start":{"line":41,"column":20},"end":{"line":43,"column":21}}],"line":41},"13":{"loc":{"start":{"line":51,"column":12},"end":{"line":58,"column":13}},"type":"if","locations":[{"start":{"line":51,"column":12},"end":{"line":58,"column":13}},{"start":{"line":51,"column":12},"end":{"line":58,"column":13}}],"line":51},"14":{"loc":{"start":{"line":54,"column":20},"end":{"line":56,"column":21}},"type":"if","locations":[{"start":{"line":54,"column":20},"end":{"line":56,"column":21}},{"start":{"line":54,"column":20},"end":{"line":56,"column":21}}],"line":54},"15":{"loc":{"start":{"line":65,"column":12},"end":{"line":66,"column":67}},"type":"if","locations":[{"start":{"line":65,"column":12},"end":{"line":66,"column":67}},{"start":{"line":65,"column":12},"end":{"line":66,"column":67}}],"line":65}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":2,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[2,0],"7":[2,2],"8":[0],"9":[0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0]},"inputSourceMap":{"version":3,"file":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/product/service.ts","sources":["/home/luck/projetos/portfolio/e-commerce/packages/server/src/product/service.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,wEAAwD;AAOxD,uDAAoD;AAEpD,8DAA6C;AAE7C,MAAqB,cAAc;IAIjC,YACE,UAAU,GAAG,IAAI,oBAAiB,EAAE,EACpC,oBAAoB,GAAG,IAAI,oBAAkB,EAAE;QAE/C,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;QAC9B,IAAI,CAAC,qBAAqB,GAAG,oBAAoB,CAAC;IACpD,CAAC;IAEY,MAAM;;YACjB,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC;QACnC,CAAC;KAAA;IAEY,OAAO,CAAC,EAAU;;YAC7B,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;YAEnD,IAAI,CAAC,OAAO;gBAAE,MAAM,IAAI,mBAAQ,CAAC,mBAAmB,CAAC,CAAC;YAEtD,OAAO,OAAO,CAAC;QACjB,CAAC;KAAA;IAEY,MAAM,CAAC,UAAiC;;YACnD,IAAI,UAAU,CAAC,UAAU,EAAE;gBACzB,KAAK,MAAM,UAAU,IAAI,UAAU,CAAC,UAAU,EAAE;oBAC9C,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,qBAAqB,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;oBACtE,IAAI,CAAC,QAAQ,EAAE;wBACb,MAAM,IAAI,mBAAQ,CAAC,gBAAgB,UAAU,YAAY,CAAC,CAAC;qBAC5D;iBACF;aACF;YAED,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;QAC7C,CAAC;KAAA;IAEY,MAAM,CACjB,EAAU,EACV,OAA8B;;YAE9B,IAAI,OAAO,CAAC,UAAU,EAAE;gBACtB,KAAK,MAAM,UAAU,IAAI,OAAO,CAAC,UAAU,EAAE;oBAC3C,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,qBAAqB,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;oBACtE,IAAI,CAAC,QAAQ,EAAE;wBACb,MAAM,IAAI,mBAAQ,CAAC,gBAAgB,UAAU,YAAY,CAAC,CAAC;qBAC5D;iBACF;aACF;YAED,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;QAC9C,CAAC;KAAA;IAEY,MAAM,CAAC,EAAU;;YAC5B,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;YAEnD,IAAI,CAAC,OAAO;gBAAE,MAAM,IAAI,mBAAQ,CAAC,mBAAmB,CAAC,CAAC;YAEtD,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;QACrC,CAAC;KAAA;CACF;AA5DD,iCA4DC","sourcesContent":["import CategoryRepository from \"../category/repository\";\nimport {\n  IProduct,\n  IProductCreateRequest,\n  IProductUpdateRequest,\n} from \"../interfaces/IProduct\";\n\nimport { NotFound } from \"../utils/errors/NotFound\";\n\nimport ProductRepository from \"./repository\";\n\nexport default class ProductService {\n  private _repository: ProductRepository;\n  private _categoriesRepository: CategoryRepository;\n\n  constructor(\n    repository = new ProductRepository(),\n    categoriesRepository = new CategoryRepository()\n  ) {\n    this._repository = repository;\n    this._categoriesRepository = categoriesRepository;\n  }\n\n  public async getAll(): Promise<IProduct[]> {\n    return this._repository.getAll();\n  }\n\n  public async getById(id: number): Promise<IProduct> {\n    const product = await this._repository.getById(id);\n\n    if (!product) throw new NotFound(\"product not found\");\n\n    return product;\n  }\n\n  public async create(newProduct: IProductCreateRequest): Promise<IProduct> {\n    if (newProduct.categories) {\n      for (const categoryId of newProduct.categories) {\n        const category = await this._categoriesRepository.getById(categoryId);\n        if (!category) {\n          throw new NotFound(`category id: ${categoryId} not found`);\n        }\n      }\n    }\n\n    return this._repository.create(newProduct);\n  }\n\n  public async update(\n    id: number,\n    payload: IProductUpdateRequest\n  ): Promise<IProduct> {\n    if (payload.categories) {\n      for (const categoryId of payload.categories) {\n        const category = await this._categoriesRepository.getById(categoryId);\n        if (!category) {\n          throw new NotFound(`category id: ${categoryId} not found`);\n        }\n      }\n    }\n\n    return this._repository.update(id, payload);\n  }\n\n  public async delete(id: number): Promise<IProduct> {\n    const product = await this._repository.getById(id);\n\n    if (!product) throw new NotFound(\"product not found\");\n\n    return this._repository.delete(id);\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3704ea8d2d5e4a5128bbd08105ad579a109298ed","contentHash":"a3409f5b4673de0fa39d3807157d8d6522a7274156a9ec1733d7ffeb3e9c0998"},"/home/luck/projetos/portfolio/e-commerce/packages/server/src/product/controller.ts":{"path":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/product/controller.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":21},"end":{"line":15,"column":58}},"16":{"start":{"line":16,"column":17},"end":{"line":16,"column":60}},"17":{"start":{"line":17,"column":18},"end":{"line":17,"column":55}},"18":{"start":{"line":20,"column":8},"end":{"line":30,"column":11}},"19":{"start":{"line":20,"column":43},"end":{"line":30,"column":10}},"20":{"start":{"line":21,"column":12},"end":{"line":29,"column":13}},"21":{"start":{"line":22,"column":35},"end":{"line":22,"column":63}},"22":{"start":{"line":23,"column":16},"end":{"line":23,"column":49}},"23":{"start":{"line":24,"column":16},"end":{"line":24,"column":66}},"24":{"start":{"line":27,"column":16},"end":{"line":27,"column":63}},"25":{"start":{"line":28,"column":16},"end":{"line":28,"column":28}},"26":{"start":{"line":31,"column":8},"end":{"line":44,"column":11}},"27":{"start":{"line":31,"column":43},"end":{"line":44,"column":10}},"28":{"start":{"line":32,"column":23},"end":{"line":32,"column":50}},"29":{"start":{"line":33,"column":12},"end":{"line":34,"column":71}},"30":{"start":{"line":34,"column":16},"end":{"line":34,"column":71}},"31":{"start":{"line":35,"column":12},"end":{"line":43,"column":13}},"32":{"start":{"line":36,"column":29},"end":{"line":36,"column":60}},"33":{"start":{"line":37,"column":16},"end":{"line":37,"column":43}},"34":{"start":{"line":38,"column":16},"end":{"line":38,"column":67}},"35":{"start":{"line":41,"column":16},"end":{"line":41,"column":64}},"36":{"start":{"line":42,"column":16},"end":{"line":42,"column":28}},"37":{"start":{"line":45,"column":8},"end":{"line":62,"column":11}},"38":{"start":{"line":45,"column":42},"end":{"line":62,"column":10}},"39":{"start":{"line":46,"column":71},"end":{"line":46,"column":79}},"40":{"start":{"line":47,"column":12},"end":{"line":61,"column":13}},"41":{"start":{"line":48,"column":35},"end":{"line":54,"column":18}},"42":{"start":{"line":55,"column":16},"end":{"line":55,"column":49}},"43":{"start":{"line":56,"column":16},"end":{"line":56,"column":66}},"44":{"start":{"line":59,"column":16},"end":{"line":59,"column":63}},"45":{"start":{"line":60,"column":16},"end":{"line":60,"column":28}},"46":{"start":{"line":63,"column":8},"end":{"line":83,"column":11}},"47":{"start":{"line":63,"column":42},"end":{"line":83,"column":10}},"48":{"start":{"line":64,"column":23},"end":{"line":64,"column":50}},"49":{"start":{"line":65,"column":12},"end":{"line":66,"column":71}},"50":{"start":{"line":66,"column":16},"end":{"line":66,"column":71}},"51":{"start":{"line":67,"column":71},"end":{"line":67,"column":79}},"52":{"start":{"line":68,"column":12},"end":{"line":82,"column":13}},"53":{"start":{"line":69,"column":39},"end":{"line":75,"column":18}},"54":{"start":{"line":76,"column":16},"end":{"line":76,"column":53}},"55":{"start":{"line":77,"column":16},"end":{"line":77,"column":66}},"56":{"start":{"line":80,"column":16},"end":{"line":80,"column":63}},"57":{"start":{"line":81,"column":16},"end":{"line":81,"column":28}},"58":{"start":{"line":84,"column":8},"end":{"line":97,"column":11}},"59":{"start":{"line":84,"column":42},"end":{"line":97,"column":10}},"60":{"start":{"line":85,"column":23},"end":{"line":85,"column":50}},"61":{"start":{"line":86,"column":12},"end":{"line":87,"column":71}},"62":{"start":{"line":87,"column":16},"end":{"line":87,"column":71}},"63":{"start":{"line":88,"column":12},"end":{"line":96,"column":13}},"64":{"start":{"line":89,"column":16},"end":{"line":89,"column":47}},"65":{"start":{"line":90,"column":16},"end":{"line":90,"column":38}},"66":{"start":{"line":91,"column":16},"end":{"line":91,"column":66}},"67":{"start":{"line":94,"column":16},"end":{"line":94,"column":63}},"68":{"start":{"line":95,"column":16},"end":{"line":95,"column":28}},"69":{"start":{"line":98,"column":8},"end":{"line":98,"column":32}},"70":{"start":{"line":101,"column":0},"end":{"line":101,"column":36}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":19,"column":4},"end":{"line":19,"column":5}},"loc":{"start":{"line":19,"column":51},"end":{"line":99,"column":5}},"line":19},"9":{"name":"(anonymous_9)","decl":{"start":{"line":20,"column":22},"end":{"line":20,"column":23}},"loc":{"start":{"line":20,"column":43},"end":{"line":30,"column":10}},"line":20},"10":{"name":"(anonymous_10)","decl":{"start":{"line":20,"column":75},"end":{"line":20,"column":76}},"loc":{"start":{"line":20,"column":88},"end":{"line":30,"column":9}},"line":20},"11":{"name":"(anonymous_11)","decl":{"start":{"line":31,"column":23},"end":{"line":31,"column":24}},"loc":{"start":{"line":31,"column":43},"end":{"line":44,"column":10}},"line":31},"12":{"name":"(anonymous_12)","decl":{"start":{"line":31,"column":75},"end":{"line":31,"column":76}},"loc":{"start":{"line":31,"column":88},"end":{"line":44,"column":9}},"line":31},"13":{"name":"(anonymous_13)","decl":{"start":{"line":45,"column":22},"end":{"line":45,"column":23}},"loc":{"start":{"line":45,"column":42},"end":{"line":62,"column":10}},"line":45},"14":{"name":"(anonymous_14)","decl":{"start":{"line":45,"column":74},"end":{"line":45,"column":75}},"loc":{"start":{"line":45,"column":87},"end":{"line":62,"column":9}},"line":45},"15":{"name":"(anonymous_15)","decl":{"start":{"line":63,"column":22},"end":{"line":63,"column":23}},"loc":{"start":{"line":63,"column":42},"end":{"line":83,"column":10}},"line":63},"16":{"name":"(anonymous_16)","decl":{"start":{"line":63,"column":74},"end":{"line":63,"column":75}},"loc":{"start":{"line":63,"column":87},"end":{"line":83,"column":9}},"line":63},"17":{"name":"(anonymous_17)","decl":{"start":{"line":84,"column":22},"end":{"line":84,"column":23}},"loc":{"start":{"line":84,"column":42},"end":{"line":97,"column":10}},"line":84},"18":{"name":"(anonymous_18)","decl":{"start":{"line":84,"column":74},"end":{"line":84,"column":75}},"loc":{"start":{"line":84,"column":87},"end":{"line":97,"column":9}},"line":84}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":19,"column":16},"end":{"line":19,"column":49}},"type":"default-arg","locations":[{"start":{"line":19,"column":26},"end":{"line":19,"column":49}}],"line":19},"9":{"loc":{"start":{"line":33,"column":12},"end":{"line":34,"column":71}},"type":"if","locations":[{"start":{"line":33,"column":12},"end":{"line":34,"column":71}},{"start":{"line":33,"column":12},"end":{"line":34,"column":71}}],"line":33},"10":{"loc":{"start":{"line":65,"column":12},"end":{"line":66,"column":71}},"type":"if","locations":[{"start":{"line":65,"column":12},"end":{"line":66,"column":71}},{"start":{"line":65,"column":12},"end":{"line":66,"column":71}}],"line":65},"11":{"loc":{"start":{"line":86,"column":12},"end":{"line":87,"column":71}},"type":"if","locations":[{"start":{"line":86,"column":12},"end":{"line":87,"column":71}},{"start":{"line":86,"column":12},"end":{"line":87,"column":71}}],"line":86}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":1,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":1,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":1,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":1,"70":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":2,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[2,0],"7":[2,2],"8":[0],"9":[0,0],"10":[0,0],"11":[0,0]},"inputSourceMap":{"version":3,"file":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/product/controller.ts","sources":["/home/luck/projetos/portfolio/e-commerce/packages/server/src/product/controller.ts"],"names":[],"mappings":"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","sourcesContent":["import { RequestHandler } from \"express\";\nimport { BadRequest } from \"../utils/errors/BadRequest\";\nimport Logger from \"../utils/logger\";\nimport { IProductCreateRequest, IProductUpdateRequest } from \"../interfaces/IProduct\";\nimport ProductService from \"./service\";\n\nexport default class ProductController {\n  private _service: ProductService;\n\n  constructor(service = new ProductService()) {\n    this._service = service;\n  }\n\n  public getAll: RequestHandler = async (_req, res, next) => {\n    try {\n      const allProduct = await this._service.getAll();\n\n      res.status(200).json(allProduct);\n\n      Logger.save(\"product getAll() success\");\n    } catch (error) {\n      Logger.save(\"product getAll() fail\");\n\n      next(error);\n    }\n  };\n\n  public getById: RequestHandler = async (req, res, next) => {\n    const id = parseInt(req.params.id, 10);\n\n    if (isNaN(id)) return next(new BadRequest(\"invalid id\"));\n\n    try {\n      const user = await this._service.getById(id);\n\n      res.status(200).json(user);\n\n      Logger.save(\"product getById() success\");\n    } catch (error) {\n      Logger.save(\"product getById() fail\");\n\n      next(error);\n    }\n  };\n\n  public create: RequestHandler = async (req, res, next) => {\n    const { name, description, price, imageUrl, categories } = req.body as IProductCreateRequest;\n\n    try {\n      const newProduct = await this._service.create({\n        name,\n        description,\n        price,\n        imageUrl,\n        categories\n      });\n\n      res.status(201).json(newProduct);\n\n      Logger.save(\"product create() success\");\n    } catch (error) {\n      Logger.save(\"product create() fail\");\n\n      next(error);\n    }\n  };\n\n  public update: RequestHandler = async (req, res, next) => {\n    const id = parseInt(req.params.id, 10);\n\n    if (isNaN(id)) return next(new BadRequest(\"invalid id\"));\n\n    const { name, description, price, imageUrl, categories } = req.body as IProductUpdateRequest;\n\n    try {\n      const updatedProduct = await this._service.update(id, {\n        name,\n        description,\n        price,\n        imageUrl,\n        categories\n      });\n\n      res.status(200).json(updatedProduct);\n\n      Logger.save(\"product update() success\");\n    } catch (error) {\n      Logger.save(\"product update() fail\");\n\n      next(error);\n    }\n  };\n\n  public delete: RequestHandler = async (req, res, next) => {\n    const id = parseInt(req.params.id, 10);\n\n    if (isNaN(id)) return next(new BadRequest(\"invalid id\"));\n\n    try {\n      await this._service.delete(id);\n\n      res.status(204).end();\n\n      Logger.save(\"product delete() success\");\n    } catch (error) {\n      Logger.save(\"product delete() fail\");\n\n      next(error);\n    }\n  };\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"81a7ebeb7ffc53bb6b4990e6d1e50a3c693da508","contentHash":"63c12e61ecb528c9de2061368b650c46bf2cfdc96ab1b96651ba04b09a8a0394"},"/home/luck/projetos/portfolio/e-commerce/packages/server/src/product/router.ts":{"path":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/product/router.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":36}},"4":{"start":{"line":7,"column":18},"end":{"line":7,"column":68}},"5":{"start":{"line":8,"column":15},"end":{"line":8,"column":62}},"6":{"start":{"line":9,"column":21},"end":{"line":9,"column":61}},"7":{"start":{"line":12,"column":8},"end":{"line":12,"column":30}},"8":{"start":{"line":13,"column":8},"end":{"line":13,"column":38}},"9":{"start":{"line":14,"column":8},"end":{"line":14,"column":55}},"10":{"start":{"line":15,"column":8},"end":{"line":15,"column":59}},"11":{"start":{"line":16,"column":8},"end":{"line":16,"column":45}},"12":{"start":{"line":17,"column":8},"end":{"line":17,"column":92}},"13":{"start":{"line":18,"column":8},"end":{"line":18,"column":94}},"14":{"start":{"line":19,"column":8},"end":{"line":19,"column":61}},"15":{"start":{"line":22,"column":8},"end":{"line":22,"column":28}},"16":{"start":{"line":25,"column":0},"end":{"line":25,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":4},"end":{"line":11,"column":5}},"loc":{"start":{"line":11,"column":91},"end":{"line":20,"column":5}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":21,"column":4},"end":{"line":21,"column":5}},"loc":{"start":{"line":21,"column":17},"end":{"line":23,"column":5}},"line":21}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":11,"column":16},"end":{"line":11,"column":48}},"type":"default-arg","locations":[{"start":{"line":11,"column":25},"end":{"line":11,"column":48}}],"line":11},"4":{"loc":{"start":{"line":11,"column":50},"end":{"line":11,"column":89}},"type":"default-arg","locations":[{"start":{"line":11,"column":63},"end":{"line":11,"column":89}}],"line":11}},"s":{"0":1,"1":3,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1},"f":{"0":3,"1":1,"2":1},"b":{"0":[1,1,1],"1":[3,0],"2":[3,3],"3":[0],"4":[0]},"inputSourceMap":{"version":3,"file":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/product/router.ts","sources":["/home/luck/projetos/portfolio/e-commerce/packages/server/src/product/router.ts"],"names":[],"mappings":";;;;;AAAA,qCAAiC;AACjC,qEAAiD;AACjD,+DAAiD;AACjD,8DAA6C;AAE7C,MAAqB,aAAa;IAKhC,YAAY,MAAM,GAAG,IAAA,gBAAM,GAAE,EAAE,UAAU,GAAG,IAAI,oBAAiB,EAAE;QACjE,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;QACtB,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;QAE9B,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;QAC/C,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;QACnD,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;QACrC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,EAAE,iBAAW,CAAC,gBAAgB,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;QAC9E,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,iBAAW,CAAC,gBAAgB,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;QAChF,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;IACvD,CAAC;IAED,IAAI,MAAM;QACR,OAAO,IAAI,CAAC,OAAO,CAAC;IACtB,CAAC;CACF;AApBD,gCAoBC","sourcesContent":["import { Router } from 'express';\nimport Middlewares from '../middlewares/Product';\nimport AuthMiddleware from '../middlewares/Auth';\nimport ProductController from './controller';\n\nexport default class ProductRouter {\n  private _router: Router;\n\n  private _controller: ProductController;\n\n  constructor(router = Router(), controller = new ProductController()) {\n    this._router = router;\n    this._controller = controller;\n\n    this._router.get('/', this._controller.getAll);\n    this._router.get('/:id', this._controller.getById);\n    this._router.use(AuthMiddleware.Jwt);\n    this._router.post('/', Middlewares.createValidation, this._controller.create);\n    this._router.put('/:id', Middlewares.updateValidation, this._controller.update);\n    this._router.delete('/:id', this._controller.delete);\n  }\n\n  get router() {\n    return this._router;\n  }\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e86aba9cef56f6414ffb2dc70b606e799c875508","contentHash":"ef50859be3b4022fd6429fd35065f66b7220e690b413d4e8436ad10b91d3bd6c"},"/home/luck/projetos/portfolio/e-commerce/packages/server/src/middlewares/Product.ts":{"path":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/middlewares/Product.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":14},"end":{"line":6,"column":45}},"4":{"start":{"line":7,"column":21},"end":{"line":7,"column":58}},"5":{"start":{"line":8,"column":21},"end":{"line":8,"column":44}},"6":{"start":{"line":11,"column":0},"end":{"line":17,"column":3}},"7":{"start":{"line":18,"column":0},"end":{"line":24,"column":3}},"8":{"start":{"line":25,"column":0},"end":{"line":37,"column":2}},"9":{"start":{"line":26,"column":63},"end":{"line":26,"column":71}},"10":{"start":{"line":27,"column":22},"end":{"line":33,"column":6}},"11":{"start":{"line":34,"column":4},"end":{"line":35,"column":64}},"12":{"start":{"line":35,"column":8},"end":{"line":35,"column":64}},"13":{"start":{"line":36,"column":4},"end":{"line":36,"column":11}},"14":{"start":{"line":38,"column":0},"end":{"line":50,"column":2}},"15":{"start":{"line":39,"column":63},"end":{"line":39,"column":71}},"16":{"start":{"line":40,"column":22},"end":{"line":46,"column":6}},"17":{"start":{"line":47,"column":4},"end":{"line":48,"column":64}},"18":{"start":{"line":48,"column":8},"end":{"line":48,"column":64}},"19":{"start":{"line":49,"column":4},"end":{"line":49,"column":11}},"20":{"start":{"line":51,"column":0},"end":{"line":51,"column":37}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":25,"column":38},"end":{"line":25,"column":39}},"loc":{"start":{"line":25,"column":59},"end":{"line":37,"column":1}},"line":25},"2":{"name":"(anonymous_2)","decl":{"start":{"line":38,"column":38},"end":{"line":38,"column":39}},"loc":{"start":{"line":38,"column":59},"end":{"line":50,"column":1}},"line":38}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":34,"column":4},"end":{"line":35,"column":64}},"type":"if","locations":[{"start":{"line":34,"column":4},"end":{"line":35,"column":64}},{"start":{"line":34,"column":4},"end":{"line":35,"column":64}}],"line":34},"4":{"loc":{"start":{"line":47,"column":4},"end":{"line":48,"column":64}},"type":"if","locations":[{"start":{"line":47,"column":4},"end":{"line":48,"column":64}},{"start":{"line":47,"column":4},"end":{"line":48,"column":64}}],"line":47}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":1,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1},"f":{"0":1,"1":0,"2":0},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[0,0],"4":[0,0]},"inputSourceMap":{"version":3,"file":"/home/luck/projetos/portfolio/e-commerce/packages/server/src/middlewares/Product.ts","sources":["/home/luck/projetos/portfolio/e-commerce/packages/server/src/middlewares/Product.ts"],"names":[],"mappings":";;;;;AACA,8CAAsB;AACtB,2DAAwD;AAExD,6CAA0C;AAE1C,MAAqB,kBAAmB,SAAQ,uBAAU;;AACzC,gCAAa,GAAG,aAAG,CAAC,MAAM,CAAC;IACxC,IAAI,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE;IAC7B,WAAW,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE;IACpC,KAAK,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE;IAC9B,QAAQ,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE;IACjC,UAAU,EAAE,aAAG,CAAC,KAAK,EAAE,CAAC,KAAK,CAAC,aAAG,CAAC,MAAM,EAAE,CAAC,CAAC,QAAQ,EAAE;CACvD,CAAC,CAAC;AAEY,gCAAa,GAAG,aAAG,CAAC,MAAM,CAAC;IACxC,IAAI,EAAE,aAAG,CAAC,MAAM,EAAE;IAClB,WAAW,EAAE,aAAG,CAAC,MAAM,EAAE;IACzB,KAAK,EAAE,aAAG,CAAC,MAAM,EAAE;IACnB,QAAQ,EAAE,aAAG,CAAC,MAAM,EAAE;IACtB,UAAU,EAAE,aAAG,CAAC,KAAK,EAAE,CAAC,KAAK,CAAC,aAAG,CAAC,MAAM,EAAE,CAAC;CAC5C,CAAC,CAAC;AAEW,mCAAgB,GAAmB,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE;IACnE,MAAM,EAAE,IAAI,EAAE,WAAW,EAAE,KAAK,EAAE,QAAQ,EAAE,UAAU,EAAE,GAAG,GAAG,CAAC,IAA6B,CAAC;IAC7F,MAAM,EAAE,KAAK,EAAE,GAAG,kBAAkB,CAAC,aAAa,CAAC,QAAQ,CAAC;QAC1D,IAAI;QACJ,WAAW;QACX,KAAK;QACL,QAAQ;QACR,UAAU;KACX,CAAC,CAAC;IAEH,IAAI,KAAK;QAAE,OAAO,IAAI,CAAC,IAAI,uBAAU,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;IAEtD,IAAI,EAAE,CAAC;AACT,CAAC,CAAC;AAEY,mCAAgB,GAAmB,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE;IACnE,MAAM,EAAE,IAAI,EAAE,WAAW,EAAE,KAAK,EAAE,QAAQ,EAAE,UAAU,EAAE,GAAG,GAAG,CAAC,IAA6B,CAAC;IAC7F,MAAM,EAAE,KAAK,EAAE,GAAG,kBAAkB,CAAC,aAAa,CAAC,QAAQ,CAAC;QAC1D,IAAI;QACJ,WAAW;QACX,KAAK;QACL,QAAQ;QACR,UAAU;KACX,CAAC,CAAC;IAEH,IAAI,KAAK;QAAE,OAAO,IAAI,CAAC,IAAI,uBAAU,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;IAEtD,IAAI,EAAE,CAAC;AACT,CAAC,CAAC;kBA7CiB,kBAAkB","sourcesContent":["import { RequestHandler } from \"express\";\nimport joi from \"joi\";\nimport { BadRequest } from \"../utils/errors/BadRequest\";\nimport { IProductCreateRequest, IProductUpdateRequest } from \"../interfaces/IProduct\";\nimport { Middleware } from \"./Middleware\";\n\nexport default class ProductMiddlewares extends Middleware {\n  private static _createSchema = joi.object({\n    name: joi.string().required(),\n    description: joi.string().required(),\n    price: joi.number().required(),\n    imageUrl: joi.string().required(),\n    categories: joi.array().items(joi.number()).required(),\n  });\n\n  private static _updateSchema = joi.object({\n    name: joi.string(),\n    description: joi.string(),\n    price: joi.number(),\n    imageUrl: joi.string(),\n    categories: joi.array().items(joi.number()),\n  });\n\n  public static createValidation: RequestHandler = (req, _res, next) => {\n    const { name, description, price, imageUrl, categories } = req.body as IProductCreateRequest;\n    const { error } = ProductMiddlewares._createSchema.validate({\n      name,\n      description,\n      price,\n      imageUrl,\n      categories,\n    });\n\n    if (error) return next(new BadRequest(error.message));\n\n    next();\n  };\n\n  public static updateValidation: RequestHandler = (req, _res, next) => {\n    const { name, description, price, imageUrl, categories } = req.body as IProductUpdateRequest;\n    const { error } = ProductMiddlewares._updateSchema.validate({\n      name,\n      description,\n      price,\n      imageUrl,\n      categories,\n    });\n\n    if (error) return next(new BadRequest(error.message));\n\n    next();\n  };\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6b5bda45b9f04760b2929bffe25f3a9f4a354dd8","contentHash":"070e1f1a0aeddf6b7410338eafbd1ebe20c4a20ebcbcee5d2556c83b275442f2"}}